"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[488],{5905:function(e,t,s){s.d(t,{Z:function(){return r}});var i=s(5893);function r(e){var t=e.type,s=void 0===t?"projects":t,r=e.title,n=e.description,l=e.data,a=void 0===l?[]:l,c=e.setFilteredData,o=void 0===c?[]:c,d=function(e){var t=e.target.value;"projects"==s&&o(a.filter(function(e){return e.project_name.toLowerCase().includes(t.toLowerCase())})),"teams"==s?o(a.filter(function(e){return e.team_name.toLowerCase().includes(t.toLowerCase())})):"employees"===s&&o(a.filter(function(e){return e.first_name.toLowerCase().includes(t.toLowerCase())||e.last_name.toLowerCase().includes(t.toLowerCase())}))};return(0,i.jsxs)("div",{className:"Search-module",children:[(0,i.jsxs)("div",{className:"Search-contents",children:[(0,i.jsx)("h1",{className:"font-semibold text-xl opacity-80",children:void 0===r?"SEARCH":r}),(0,i.jsx)("p",{className:"text-sm opacity-60 mt-1",children:void 0===n?"Take a dive in to the project and its attributes. Find anything you are looking for in this project":n})]}),(0,i.jsxs)("div",{className:"Search-bar bg-gray-900 py-2 border-2 border-black rounded-md flex flex-row justify-between items-center px-4 mt-4",children:[(0,i.jsx)("input",{placeholder:"Search ".concat(s,"..."),type:"text",className:"bg-transparent md:w-4/6 sm:w-[8rem] w-[8rem] focus:outline-0",onChange:d}),(0,i.jsxs)("button",{className:"bg-primary py-2 px-3 rounded-md",children:[(0,i.jsxs)("p",{className:"sm:flex hidden",children:["Find in “",s,"”"]}),(0,i.jsx)("p",{className:"sm:hidden flex",children:"Search"})]})]})]})}s(7294)},1072:function(e,t,s){s.d(t,{Z:function(){return f}});var i=s(7568),r=s(655),n=s(5893),l=s(2453),a=s(1290),c=s(7294),o=s(5636),d=s(381),u=s.n(d),m=s(7597);function f(e){var t,s=e.projectId,d=void 0===s?null:s,f=e.teamId,h=void 0===f?null:f,x=e.isNewEmployee,p=e.setisNewEmployee,j=e.setIsTicketInfo,y=(0,c.useState)([]),w=y[0],g=y[1],b=(0,c.useState)(!1),v=b[0],N=b[1],k=(t=(0,i.Z)(function(){return(0,r.__generator)(this,function(e){switch(e.label){case 0:if(N(!0),!d)return[3,2];return[4,(0,o.D6)(d).then(function(e){e.data?(N(!1),g(e.data.result)):(console.log(e),N(!1),l.ZP.error("Error while fetching project tickets!"))})];case 1:return e.sent(),[3,4];case 2:if(!h)return[3,4];return[4,(0,o.GV)(h).then(function(e){e.data?(N(!1),g(e.data.result)):(console.log(e),N(!1),l.ZP.error("Error while fetching team tickets!"))})];case 3:e.sent(),e.label=4;case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,c.useEffect)(function(){x&&(k(),p(!1))},[x]),(0,c.useEffect)(function(){k()},[]),(0,n.jsx)("div",{className:"flex flex-col justify-center items-center -mt-4",children:(0,n.jsx)("div",{className:"project_employees_data_table w-full",children:(0,n.jsx)(a.Z,{columns:[{title:"Title",width:150,render:function(e,t){var s=t.title,i=t.id;return(0,n.jsx)("div",{className:"underline cursor-pointer",onClick:function(){return j({id:i})},children:(0,n.jsx)("h1",{children:s})})},key:"title"},{title:"Description",dataIndex:"description",width:300,key:"description"},{title:"Project",render:function(e,t){var s=t.project;return(0,n.jsx)(m.Z,{title:s.project_name,type:"secondry",size:"md"})},key:"projectId"},{title:"Team",render:function(e,t){var s=t.team;return(0,n.jsx)(m.Z,{title:s.team_name,type:"pOrange",size:"md"})},key:"teamId"},{title:"Assigned to",render:function(e,t){var s=t.employee;return(0,n.jsx)(m.Z,{title:s.first_name+" "+s.last_name,type:"base",size:"md"})},key:"AssignedTo"},{title:"Status",render:function(e,t){var s=t.TicketStatus;return(0,n.jsx)("h1",{children:s.title})},key:"TicketStatus"},{title:"Piority",render:function(e,t){var s=t.TicketPiority;return(0,n.jsx)("h1",{children:s.title})},key:"TicketStatus"},{title:"Deadline",render:function(e,t){var s=t.deadline;return(0,n.jsx)("h1",{children:u()(s).format("MMMM Do YYYY")})},key:"Deadline"},],dataSource:w,scroll:{x:1e3},className:"rounded-none",style:{borderRadius:"0 !impotant"},loading:v})})})}},5936:function(e,t,s){s.d(t,{Z:function(){return n}});var i=s(5893);s(7294);var r=s(1649);function n(){return(0,i.jsxs)("button",{className:"bg-intermediate bg-opacity-70 hover:bg-opacity-100 transition-all py-2 px-4 rounded-md flex flex-row justify-center items-center drop-shadow-2xl",children:[(0,i.jsx)(r.gyF,{size:26})," ",(0,i.jsx)("p",{children:"Create Ticket"})]})}},1026:function(e,t,s){s.d(t,{Z:function(){return k}});var i=s(7568),r=s(603),n=s(655),l=s(5893),a=s(7294),c=s(5636),o=s(3299),d=s(2453),u=s(6477),m=s(7527),f=s(8033),h=s(5788),x=s(3750),p=s(9583),j=s(8193),y=s(2831),w=s(442),g=s(3588),b=s(381),v=s.n(b),N=s(3838);function k(e){var t=e.teamsData,s=e.setIsCreateTicket,b=function(e){var t={title:e.title,description:e.description,deadline:e.deadline,userId:Z.user.id,teamId:e.team,employeeId:e.employee,ticketStatusId:e.ticket_status,ticketPiorityId:e.ticket_piority,resource:""};q(!0),B?(0,c.G1)(B).then(function(e){e.error?(d.ZP.error("Error while uploading resource for ticket!"),q(!1)):(t.resource=e.data.newName,(0,c.HO)(t).then(function(e){e.error?(d.ZP.error("Error while Creating and assigning a ticket to an employee!"),q(!1)):(q(!1),d.ZP.success("Created and assigned a ticket to an employee!"),s(!1))}))}).catch(function(e){console.log(e),q(!1)}):(0,c.HO)(t).then(function(e){e.error?(d.ZP.error("Error while Creating and assigning a ticket to an employee!"),q(!1)):(q(!1),d.ZP.success("Created and assigned a ticket to an employee!"),s(!1))})},k=(0,o.useSession)(),Z=k.data;k.status;var T=(0,a.useState)(void 0===t?[]:t),S=T[0],C=T[1],_=(0,a.useState)([]),E=_[0],I=_[1],P=(0,a.useState)([]),D=P[0],z=P[1],L=(0,a.useState)([]),M=L[0],Y=L[1],A=(0,a.useState)(!0),F=A[0],q=A[1],H=(0,a.useState)(!1);H[0],H[1];var O=(0,a.useState)(!1),R=O[0],Q=O[1],V=(0,a.useState)(null),B=V[0],G=V[1],U=y.Z.TextArea,W=(0,r.Z)(w.Z.useForm(),1)[0];function X(){return(X=(0,i.Z)(function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:if(0!=S.length)return[3,2];return q(!0),[4,(0,c.qX)().then(function(e){e.error?d.ZP.error("Error while getting all teams!"):(C(e.data),q(!1))})];case 1:e.sent(),e.label=2;case 2:if(0!=E.length)return[3,4];return q(!0),[4,(0,c.fN)().then(function(e){e.error?d.ZP.error("Error while getting all employees!"):(I(e.data),q(!1))})];case 3:e.sent(),e.label=4;case 4:if(0!=D.length)return[3,6];return q(!0),[4,(0,c.L)().then(function(e){e.error?d.ZP.error("Error while getting tickets status!"):(z(e.data.data),q(!1))})];case 5:e.sent(),e.label=6;case 6:if(0!=M.length)return[3,8];return q(!0),[4,(0,c.Xd)().then(function(e){e.error?d.ZP.error("Error while getting tickets piority!"):(Y(e.data.data),q(!1))})];case 7:e.sent(),e.label=8;case 8:return[2]}})})).apply(this,arguments)}(0,a.useEffect)(function(){!function(){return X.apply(this,arguments)}()},[]);var J=(0,a.useRef)(null),K=function(e){J.current.click()},$=function(e){console.log(e.target.files[0]),G(e.target.files[0])};return(0,l.jsx)(N.E.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{duration:.15,ease:"easeIn"},className:"flex flex-col items-center z-10 w-full",children:(0,l.jsx)("div",{className:"create-ticket-model mb-4",children:(0,l.jsxs)("div",{className:"bg-gray-900 p-4 rounded-md drop-shadow-lg flex flex-col justify-between items-center w-[22rem] sm:w-[35rem]",children:[(0,l.jsxs)("header",{className:"flex flex-row justify-between items-center w-full",children:[(0,l.jsxs)("div",{className:"flex justify-center items-center",children:[(0,l.jsx)(x.eHD,{size:24}),(0,l.jsx)("h1",{className:"ml-2 font-semibold text-lg",children:"Create Ticket"})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,l.jsx)(u.Z,{placement:"top",title:"Add resource",mouseEnterDelay:.05,children:(0,l.jsxs)("div",{className:"bg-white bg-opacity-10 hover:bg-opacity-20 transition-all cursor-pointer p-2 rounded-full mr-3",onClick:function(){return K()},children:[(0,l.jsx)(j.O1u,{size:18}),(0,l.jsx)("input",{type:"file",className:"hidden",multiple:!1,placeholder:"Choose file",ref:J,onChange:$})]})}),(0,l.jsx)("button",{className:"cancel-btn opacity-60 hover:opacity-100",onClick:function(){return s(!1)},children:(0,l.jsx)(h.ySC,{size:24})})]})]}),(0,l.jsx)("div",{className:"my-4 w-full",children:(0,l.jsx)(g.Z,{color:"bg-gray-800",width:"w-full",opacity:"opacity-1"})}),(0,l.jsxs)(w.Z,{form:W,layout:"vertical",name:"create project - part 1",onFinish:b,style:{width:"100%"},scrollToFirstError:!0,disabled:F,children:[(0,l.jsx)(w.Z.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Ticket title is required!"},{min:5,message:"Ticket title must be atleast 5 characters long!"},{whitespace:!0,message:"Ticket title must be atleast 1 non-whitespace character!"},],children:(0,l.jsx)(y.Z,{placeholder:"Enter a ticket title"})}),(0,l.jsx)(w.Z.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Description title is required!"},{min:5,message:"Ticket Description must be atleast 5 characters long!"},{whitespace:!0,message:"Ticket Description must be atleast 1 non-whitespace character!"},],children:(0,l.jsx)(U,{rows:4,placeholder:"Enter a description"})}),(0,l.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,l.jsx)(w.Z.Item,{name:"team",label:"Team",rules:[{required:!0,message:"Please select a team!"},],className:"w-full",children:(0,l.jsx)(m.Z,{placeholder:"Select team",onChange:function(e){console.log(e),Q(e)},children:S.map(function(e){return(0,l.jsx)(m.Z.Option,{value:e.id,children:e.team_name},e.id)})})}),(0,l.jsx)(w.Z.Item,{name:"employee",label:"Assignee Employee",rules:[{required:!0,message:"Please select a Assignee Employee!"},],className:"w-full ml-2",children:(0,l.jsx)(m.Z,{disabled:!R,placeholder:"Select employee",children:E.map(function(e){if(e.UserTeams.find(function(e){return e.team_id==R}))return(0,l.jsxs)(m.Z.Option,{value:e.id,children:[e.first_name," ",e.last_name]},e.id)})})})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,l.jsx)(w.Z.Item,{name:"ticket_status",label:"Ticket status",rules:[{required:!0,message:"Please select a ticket status!"},],className:"w-full",children:(0,l.jsx)(m.Z,{placeholder:"Select a status",children:D.map(function(e){var t="Todo"==e.title?"green":"In-progress"==e.title?"orange":"Done"==e.title?"purple":"Resolved"==e.title?"blue":"Tested but not resolved"==e.title?"red":"white";return(0,l.jsx)(m.Z.Option,{value:e.id,children:(0,l.jsxs)("div",{className:"flex justify-start items-center -mb-7",children:[(0,l.jsx)("div",{className:"h-3 w-3 rounded-full opacity-30 mr-2",style:{backgroundColor:t}}),e.title]})},e.id)})})}),(0,l.jsx)(w.Z.Item,{name:"ticket_piority",label:"Ticket piority",rules:[{required:!0,message:"Please give a ticket piority!"},],className:"w-full ml-2",children:(0,l.jsx)(m.Z,{placeholder:"Select a piority",children:M.map(function(e){var t="Urgent"==e.title?"red":"High"==e.title?"yellow":"Normal"==e.title?"green":"white";return(0,l.jsx)(m.Z.Option,{value:e.id,children:(0,l.jsxs)("div",{className:"flex justify-start items-center -mb-7",children:[(0,l.jsx)(p.wQ2,{color:t,className:"mr-2"}),e.title]})},e.id)})})})]}),(0,l.jsx)(w.Z.Item,{name:"deadline",label:"Ticket Deadline",rules:[{required:!0,message:"Ticket Deadline is required!"},],children:(0,l.jsx)(f.Z,{className:"w-full",disabledDate:function(e){return v()().add(-1,"days")>=e||v()().add(1,"month")<=e}})}),(0,l.jsx)("button",{className:"bg-primary h-12 p-2 rounded-md flex flex-row justify-center items-center w-full text-lg font-semibold mt-4 disabled:opacity-50",disabled:F,children:F?(0,l.jsxs)("svg",{class:"animate-spin -ml-1 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,l.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,l.jsx)("p",{children:"Create"})})]})]})})})}},7153:function(e,t,s){s.d(t,{Z:function(){return g}});var i=s(5893),r=s(629),n=s(1687),l=s(7527),a=s(5737),c=s(2453),o=s(7294);s(3588);var d=s(5636),u=s(7516),m=s(381),f=s.n(m),h=s(9583),x=s(6893),p=s(9352),j=s(3750),y=s(3802),w=s(3299);function g(e){var t,s=function(){e.isTicketInfo.id&&(k(!0),(0,d.Q4)(e.isTicketInfo.id).then(function(e){e.error?(k(!1),c.ZP.error("Some error occoured while fetching project employees!")):(E(e.data.data),k(!1))}),(0,d.L)().then(function(e){e.error?c.ZP.error("Some error occoured while fetching project employees!"):D(e.data.data)}))},m=function(e){(0,d.AF)(_.id,e).then(function(e){e.error?c.ZP.error("Error while changing status of ticket!"):(c.ZP.success("Ticket status has been changed!"),s())})},g=function(){k(!0),(0,d.cc)(_.id,L.user.id).then(function(t){t.error?(c.ZP.error("Error while changing status of ticket!"),k(!1)):(c.ZP.success("Ticket status has been deleted!"),e.setIsTicketInfo({id:null}))})},b=function(e){S(!0),(0,d.xn)(e).then(function(e){e.data?(c.ZP.success("Resource download started!"),S(!1)):(c.ZP.error("Error while downloading resouce!"),S(!1))})},v=(0,o.useState)(!0),N=v[0],k=v[1],Z=(0,o.useState)(!1),T=Z[0],S=Z[1],C=(0,o.useState)(null),_=C[0],E=C[1],I=(0,o.useState)([]),P=I[0],D=I[1],z=(0,w.useSession)(),L=z.data;z.status;var M=(0,o.useState)([window.innerWidth,window.innerHeight,]),Y=M[0],A=M[1];return(0,o.useEffect)(function(){var e=function(){A([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),(0,o.useEffect)(function(){s()},[e.isTicketInfo.id]),(0,i.jsx)(r.Z,{title:"Ticket",onClose:function(){return e.setIsTicketInfo({id:null})},open:e.isTicketInfo.id,bodyStyle:{paddingBottom:80},width:Y[0]>1100?"70%":"100%",children:N||!_?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Z,{active:!0}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(n.Z,{active:!0})}),(0,i.jsx)("div",{className:"mt-56",children:(0,i.jsx)(n.Z,{active:!0})})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"tickets-info",children:[(0,i.jsx)("header",{className:"flex flex-row justify-between",children:(0,i.jsxs)("div",{className:"flex flex-col w-full",children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center w-full",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center opacity-75",children:[(0,i.jsx)("div",{className:"w-6",children:(0,i.jsx)(u.ybL,{size:28})}),(0,i.jsx)("h1",{className:"text-xl md:text-3xl font-semibold ml-2",children:_.title})]}),(0,i.jsx)("div",{className:"md:m-0 m-4",children:(0,i.jsx)(l.Z,{defaultValue:function(){var e=P.find(function(e){return e.id==_.ticketStatusId});return null==e?void 0:e.title},style:{width:200},onChange:function(e){return m(e)},children:P.map(function(e){return(0,i.jsx)(l.Z.Option,{value:e.id,children:e.title},e.id)})})})]}),(0,i.jsxs)("div",{className:"text-lg flex flex-row items-center",children:[(t=_.TicketStatus.title,(0,i.jsx)("div",{className:"rounded-full text-lg bg-opacity-25",children:(0,i.jsx)("h1",{style:{color:"orange"},children:t})})),(0,i.jsxs)("p",{className:"ml-2",children:[_.user.employee.first_name," ",_.user.employee.last_name]}),(0,i.jsxs)("p",{className:"opacity-50 ml-2",children:["Opened on"," ",f()(_.createdAt).format("MMMM Do YYYY")]})]})]})}),(0,i.jsx)("div",{className:"tabdevider h-[1.5px] my-4 bg-opacity-10 bg-white w-full rounded-lg"}),(0,i.jsx)("div",{className:"border-2 border-gray-600 rounded-lg p-4 h-full",children:(0,i.jsxs)("div",{className:"h-[20rem]",children:[(0,i.jsx)("p",{className:"italic mb-4 font-bold opacity-30",children:"Description"}),(0,i.jsx)("div",{children:_.description})]})}),(0,i.jsx)("div",{className:"tabdevider h-[1.5px] my-4 bg-opacity-10 bg-white w-full rounded-lg"}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between w-full h-full",children:[(0,i.jsxs)("div",{className:"flex flex-col w-full md:w-1/2",children:[(0,i.jsxs)("div",{className:"flex justify-between w-full text-base mb-4",children:[(0,i.jsx)("h1",{className:"opacity-50",children:"Assigned to"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(p.RrS,{size:22,className:"mr-2"}),(0,i.jsxs)("h1",{className:"",children:[_.employee.first_name," ",_.employee.last_name]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between w-full text-base mb-4",children:[(0,i.jsx)("h1",{className:"opacity-50",children:"Project"}),(0,i.jsx)("h1",{className:"",children:_.project.project_name})]}),(0,i.jsxs)("div",{className:"flex justify-between w-full text-base mb-4",children:[(0,i.jsx)("h1",{className:"opacity-50",children:"Team"}),(0,i.jsx)("h1",{className:"",children:_.team.team_name})]}),(0,i.jsxs)("div",{className:"flex justify-between w-full text-base mb-4",children:[(0,i.jsx)("h1",{className:"opacity-50",children:"Deadline"}),(0,i.jsx)("h1",{className:"",children:f()(_.deadline).format("MMMM Do YYYY")})]}),(0,i.jsxs)("div",{className:"flex justify-between w-full text-base mb-4",children:[(0,i.jsx)("h1",{className:"opacity-50",children:"Piority"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(h.wQ2,{className:"mr-2"}),(0,i.jsx)("h1",{className:"",children:_.TicketPiority.title})]})]})]}),(0,i.jsx)("div",{className:"tabdevider w-[1.5px] md:flex hidden h-[10rem] mx-4 bg-opacity-10 bg-white rounded-lg"}),(0,i.jsxs)("div",{className:"w-full md:w-1/2 flex flex-col",children:[_.Resource[0].url?(0,i.jsxs)("button",{className:"py-2 mb-4 bg-green-600 bg-opacity-20 hover:bg-opacity-30 transition-all w-full rounded-lg flex flex-row justify-center items-center disabled:opacity-50",onClick:function(){return b(_.Resource[0].url)},disabled:T,children:[(0,i.jsx)(j.eHD,{color:"green",size:20}),(0,i.jsx)("p",{className:"text-green-600 tex-xl font-bold ml-2",children:"Downlaod Resource"})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"py-2 mb-4 bg-white bg-opacity-10 transition-all w-full rounded-lg flex flex-row justify-center items-center disabled:opacity-50",children:[(0,i.jsx)(j.eHD,{color:"white",size:20}),(0,i.jsx)("p",{className:"text-white-600 tex-xl font-bold ml-2",children:"No resource added!"})]})}),(0,i.jsx)(y.Z,{grantPermissionFor:"manage_tickets",children:(0,i.jsx)(a.Z,{title:"Are you sure you want to delete this ticket?",onConfirm:function(){g()},okText:"Confirm",cancelText:"No",placement:"top",children:(0,i.jsxs)("button",{className:"py-2 bg-red-600 bg-opacity-20 hover:bg-opacity-30 transition-all w-full rounded-lg flex flex-row justify-center items-center",children:[(0,i.jsx)(x.Ybf,{color:"red",size:20}),(0,i.jsx)("p",{className:"text-red-600 tex-xl font-bold ml-2",children:"Delete Ticket"})]})})})]})]})]})})})}}}]);