(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{8020:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return t(7704)}])},7704:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var r=t(7568),n=t(6042),a=t(9396),i=t(655),o=t(5893),l=t(7294),c=t(3299),d=t(5675),u=t.n(d),m=t(1163),h=t(603),p=t(9352),g=t(442),f=t(2831);function x(e){var s=e.setIsClicked,t=e.setEmail,r=e.setPassword,n=e.loading,a=e.errorMessage,i=(0,l.useState)("h-12 bg-gray-700 rounded-sm px-3 "),c=i[0],d=i[1],u=(0,h.Z)(g.Z.useForm(),1)[0],m=function(e){s(!0),t(e.email),r(e.password)};return(0,l.useEffect)(function(){a?d(c+"border-red-500 border-2"):d("h-12 bg-gray-700 rounded-sm px-3 ")},[a]),(0,o.jsx)("div",{className:"bg-gray-900 rounded-md shadow-xl m-2 p-4 md:p-9 border-black flex flex-col justify-center items-center",style:{height:"34rem"},children:(0,o.jsxs)("div",{className:"Input-container flex flex-col justify-center items-center",children:[(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center mb-7",children:[(0,o.jsx)("h1",{className:"text-4xl font-demo",children:"Login"}),(0,o.jsx)("p",{className:"pt-2 opacity-60",children:"Please enter your valid Credentials!"})]}),(0,o.jsxs)(g.Z,{form:u,name:"signin",onFinish:m,style:{width:"100%"},scrollToFirstError:!0,disabled:n,layout:"vertical",children:[(0,o.jsx)(g.Z.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"},{whitespace:!0,message:"Must be atleast one non-space character!"},],children:(0,o.jsx)(f.Z,{})}),(0,o.jsx)(g.Z.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:8,message:"Password must be 8 characters long!"},],hasFeedback:!0,children:(0,o.jsx)(f.Z.Password,{})}),a?(0,o.jsxs)("div",{className:"error-message flex flex-row items-center",children:[(0,o.jsx)("div",{className:"error-icon mr-2",children:(0,o.jsx)(p.j6O,{size:28,className:"text-red-500"})}),(0,o.jsx)("p",{className:"text-red-500 text-md",children:a})]}):"",(0,o.jsxs)("div",{className:"submission-section flex flex-col mt-5",children:[(0,o.jsx)("p",{className:"text-xs text-center mb-3 opacity-60",children:"By logging in you are agreeing to the company user terms and conditions"}),(0,o.jsx)("button",{className:n?"bg-secondry px-5 py-3 rounded-sm opacity-60":"bg-secondry px-5 py-3 rounded-sm",type:"submit",disabled:n,children:"LOGIN"})]})]})]})})}var b={src:"/_next/static/media/login_bg_image.adb8dd01.svg",height:400,width:600},y=t(3838),j=t(1613);function w(){var e,s=(0,l.useState)(!1),t=s[0],d=s[1],h=(0,l.useState)(null),p=h[0],g=h[1],f=(0,l.useState)(null),w=f[0],v=f[1],N=(0,l.useState)(!1),_=N[0],E=N[1],P=(0,l.useState)(null),Z=P[0],k=P[1],S=(0,l.useState)(null),I=S[0],F=S[1],C=(0,m.useRouter)(),L=(0,j.y)(),O=(L.notifications,L.setNotifications),R=(0,c.useSession)(),T=(R.data,R.status);(0,l.useEffect)(function(){"authenticated"==T&&(O({placement:"bottomRight",message:"You are already logged in!",description:"",type:"warning"}),C.replace("/app"))},[T]);var Y,z=(e=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(s){switch(s.label){case 0:return E(!0),k(null),e={email:p,password:w},[4,(0,c.signIn)("credentials",(0,a.Z)((0,n.Z)({},e),{redirect:!1}))];case 1:return F.apply(void 0,[s.sent()]),[2]}})}),function(){return e.apply(this,arguments)}),M=(Y=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(s){switch(s.label){case 0:return[4,(0,c.getSession)()];case 1:return e=s.sent(),console.log(I),console.log({session:e}),[2]}})}),function(){return Y.apply(this,arguments)});return(0,l.useEffect)(function(){console.log(I),I&&(I.error?(E(!1),k("Email or Password Incorrect"==I.error?"Email or Password Incorrect":"Your credentials has been revoked"==I.error?"Your credentials has been revoked":"Some error occoured!"),O({placement:"bottomRight",message:"Login Failed",description:"Please type in correct credentials before you try to login!",type:"error"})):(O({placement:"bottomRight",message:"Login sucess",description:"You have been logged in to the Projectorate!!!",type:"sucess"}),C.replace("/app")),M())},[I]),(0,l.useEffect)(function(){t&&(z(),d(!1))},[t]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"h-screen bg-primary",children:[(0,o.jsx)("div",{className:"secondry-section h-screen w-screen absolute z-0",children:(0,o.jsx)("div",{className:"absolute bottom-0 h-full w-full mx-[-15vw]",children:(0,o.jsx)(u(),{src:b,alt:"Projectorate welcome image",layout:"fill",objectFit:"contain"})})}),(0,o.jsx)("div",{className:"primary-section w-full h-full z-1 absolute flex justify-end items-center lg:pr-40 md:pr-20 sm:10 ",children:(0,o.jsx)(y.E.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.2},children:(0,o.jsx)(x,{setIsClicked:d,setEmail:g,setPassword:v,loading:_,errorMessage:Z})})})]})})}}},function(e){e.O(0,[245,838,675,774,888,179],function(){return e(e.s=8020)}),_N_E=e.O()}]);