(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{4559:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/u/board",function(){return s(3055)}])},3055:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(7568),i=s(655),a=s(5893),n=s(7294),l=s(471),c=s(1649),o=s(3854),d=s(5636),x=s(6477),m=s(2983),u=s(381),f=s.n(u);function h(e){return"Todo"==e?"#16A34A":"In-progress"==e?"#CA8A04":"Done"==e?"#7C3AED":"Resolved"==e?"#D97706":"Tested but not resolved"==e?"#BE185D":"#2563ED"}function p(e){var t=e.ticket,s=e.setIsTicketInfo;return(0,a.jsxs)("div",{className:"ticket bg-gray-800 bg-opacity-90 border-[1.5px] border-gray-600 hover:border-primary transition-all cursor-pointer p-3 rounded-md w-full mb-2",onClick:function(){return s({id:t.id})},children:[(0,a.jsxs)("header",{className:"ticket0-header flex flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-5 w-5 rounded-full border-[1.5px] border-opacity-50 mr-2 flex justify-center items-center",style:{borderColor:h(t.TicketStatus.title)},children:(0,a.jsx)("div",{className:"h-[4px] w-[4px] rounded-full",style:{backgroundColor:h(t.TicketStatus.title)}})}),(0,a.jsxs)("div",{className:"team-name text-sm opacity-75",children:[t.team.team_name," #",t.id]})]}),(0,a.jsx)(x.Z,{placement:"top",title:t.employee.first_name+" "+t.employee.last_name,mouseEnterDelay:.05,children:(0,a.jsx)("div",{className:"h-8 w-8 flex justify-center items-center rounded-full border-[1.5px] border-secondry border-opacity-20 hover:border-opacity-30 bg-secondry bg-opacity-10 text-secondry text-opacity-50 hover:bg-opacity-20 hover:text-opacity-100 transition-all",children:t.employee.first_name[0]})})]}),(0,a.jsx)("main",{className:"ticket-decription my-1 text-sm",children:t.title}),(0,a.jsxs)("footer",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"inline-flex",children:[(0,a.jsx)("div",{className:"text-white text-opacity-60 px-2 mt-1 mr-1 py-1 border-[1.5px] bg-gray-800 border-gray-500 border-opacity-50 rounded-full text-xs ",children:t.TicketPiority.title}),(0,a.jsx)("div",{className:"text-white text-opacity-60 px-2 mt-1 mr-1 py-1 border-[1.5px] bg-gray-800 border-gray-500 border-opacity-50 rounded-full text-xs ",children:f()(t.deadline).format("DD/MM/YY")})]}),(0,a.jsx)("div",{className:"inline-flex",children:(0,a.jsxs)("div",{className:"flex items-center text-white text-opacity-60 px-2 mt-1 mr-1 py-1 border-[1.5px] bg-gray-800 border-gray-500 border-opacity-50 rounded-full text-xs ",children:[(0,a.jsx)("span",{className:"mr-1",children:(0,a.jsx)(c.hVy,{})}),t.project.project_name," / ",t.team.team_name]})})]})]})}function j(e){var t=e.data,s=e.tickets,r=e.setIsTicketInfo;return(0,a.jsxs)("div",{className:"mx-1 !h-full overflow-y-auto !w-88 border-2 border-gray-600 border-opacity-60 rounded-md flex flex-col flex-shrink-0 bg-gray-900 bg-opacity-75 hover:bg-opacity-100 transition-all p-2 relative",children:[(0,a.jsxs)("header",{className:"flex flex-col w-full p-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-4 w-4 mr-2  rounded-full",style:{backgroundColor:h(t.title)}}),(0,a.jsx)("h1",{className:"text-base font-semibold opacity-80",children:t.title})]}),(0,a.jsx)("p",{className:"text-sm mt-1 opacity-50",children:t.description})]}),(0,a.jsxs)("main",{className:"mt-3 w-full",children:[s.map(function(e,t){return(0,a.jsx)("div",{className:"",children:(0,a.jsx)(p,{ticket:e,setIsTicketInfo:r})},t)}),0==s.length?(0,a.jsx)(m.Z,{image:m.Z.PRESENTED_IMAGE_SIMPLE,description:"No tickets in ".concat(t.title)}):(0,a.jsx)(a.Fragment,{})]})]})}var y=s(5266),b=s(3299),v=s(3802),N=s(1026),g=s(5936),k=s(8960);function w(){var e=(0,b.useSession)(),t=e.data;e.status;var s=(0,n.useState)([]),x=s[0],m=s[1],u=(0,n.useState)([]),f=u[0],h=u[1],p=(0,n.useState)(!1),w=p[0],_=p[1],T=(0,n.useState)(!1),I=T[0],E=T[1];function C(){return(C=(0,r.Z)(function(){var e,s;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,(0,d.jQ)(t.user.id)];case 1:return e=r.sent(),[4,(0,d.L)()];case 2:return s=r.sent(),m(e.data.result),h(s.data.data),[2]}})})).apply(this,arguments)}return(0,n.useEffect)(function(){(null==t?void 0:t.user.id)&&function(){C.apply(this,arguments)}()},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.NC,{}),f.length>0?(0,a.jsx)(k.Z,{isTicketInfo:I,setIsTicketInfo:E}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)(v.Z,{grantPermissionFor:"manage_tickets",children:(0,a.jsxs)("div",{className:"absolute z-[999] bottom-4 right-4 flex flex-col items-end",children:[w?(0,a.jsx)(N.Z,{setIsCreateTicket:_}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:"Create-ticket",onClick:function(){return _(!0)},children:(0,a.jsx)(g.Z,{})})]})}),(0,a.jsxs)("div",{className:"board h-full w-full overflow-hidden",children:[(0,a.jsxs)("header",{className:"flex flex-row items-center justify-between border-b-2 border-b-gray-900 px-4 py-2 relative",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("div",{className:"teams-panel-icon mr-3",children:(0,a.jsx)(o.fkX,{size:26})}),(0,a.jsx)("h1",{className:"text-lg font-bold",children:"Board Panel"})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("div",{className:"help-icon px-2",children:(0,a.jsx)(l.tic,{size:24})}),(0,a.jsx)("div",{className:"inbox-icon px-2",children:(0,a.jsx)(c.nj5,{size:26})})]})]}),(0,a.jsx)("div",{className:"mx-4 my-4",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"font-bold text-2xl",children:"Tickets"}),(0,a.jsx)("p",{className:"opacity-50",children:"This board shows all the tickets assigned to you"})]})}),(0,a.jsx)("div",{className:"board-penel flex h-[82vh] overflow-x-scroll",children:f.map(function(e,t){var s=x.filter(function(t){return t.ticketStatusId==e.id});return(0,a.jsx)("div",{className:"tickets-container-by-status",children:(0,a.jsx)(j,{data:e,tickets:s,setIsTicketInfo:E})},t)})})]})]})}}},function(e){e.O(0,[874,907,955,57,442,483,838,544,774,888,179],function(){return e(e.s=4559)}),_N_E=e.O()}]);