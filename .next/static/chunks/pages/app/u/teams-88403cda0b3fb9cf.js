(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{6612:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/u/teams",function(){return s(9408)}])},9408:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return J}});var a=s(7568),l=s(655),n=s(5893),r=s(2453),i=s(6477),o=s(2181),c=s(5737),m=s(6275),d=s(7294),u=s(1163),x=s(471),f=s(1649),h=s(5905),j=s(3588),p=s(5636),y=s(7597);function g(e){var t=e.teamName,s=void 0===t?"Team Name":t,a=e.tagTitle,l=e.employeesCount,r=void 0===l?"000":l,i=e.ticketsCount,o=void 0===i?"000":i;return(0,n.jsxs)("div",{className:"h-44 w-full md:w-96 bg-gray-900 rounded-md shadow-sm p-6 flex flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("div",{className:"team-main-Image rounded-lg w-14 h-14 bg-gray-700 flex justify-center items-center",children:(0,n.jsx)("h1",{className:"font-bold text-5xl",children:s[0]})}),(0,n.jsxs)("div",{className:"projects-container-main-info ml-3",children:[(0,n.jsx)("h4",{className:"pb-1 text-xl font-semibold",children:s}),(0,n.jsx)("div",{className:"team-tags flex flex-row",children:(0,n.jsx)(y.Z,{title:void 0===a?"Software Dev":a,type:"intermediate"})})]})]}),(0,n.jsxs)("div",{className:"team-attributes flex flex-row justify-evenly",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"text-secondry font-bold text-2xl",children:0==r?"000":r}),(0,n.jsx)("p",{className:"text-sm opacity-80",children:"Members"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"text-intermediate font-bold text-2xl",children:0==o?"000":o}),(0,n.jsx)("p",{className:"text-sm opacity-80",children:"Tickets"})]})]})]})}function w(){return(0,n.jsxs)("div",{className:"animate-pulse h-44 w-full md:w-96 bg-gray-700 rounded-md shadow-sm p-6 flex flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("div",{className:"rounded-lg w-14 h-14 bg-gray-600 flex justify-center items-center"}),(0,n.jsxs)("div",{className:"teams-container-main-info ml-3",children:[(0,n.jsx)("h4",{className:"pb-1 text-xl font-semibold h-6 w-32 rounded-md bg-gray-600"}),(0,n.jsx)("div",{className:"teams-tags flex flex-row",children:(0,n.jsx)("h4",{className:"mt-4 text-xl font-semibold h-4 w-24 rounded-md bg-gray-600"})})]})]}),(0,n.jsxs)("div",{className:"projects-attributes flex flex-row justify-between",children:[(0,n.jsx)("div",{className:"flex flex-col items-center",children:(0,n.jsx)("div",{className:"rounded-lg w-20 h-10 bg-gray-600 flex justify-center items-center"})}),(0,n.jsx)("div",{className:"flex flex-col items-center",children:(0,n.jsx)("div",{className:"rounded-lg w-20 h-10 bg-gray-600 flex justify-center items-center"})}),(0,n.jsx)("div",{className:"flex flex-col items-center",children:(0,n.jsx)("div",{className:"rounded-lg w-20 h-10 bg-gray-600 flex justify-center items-center"})})]})]})}var v=s(5788),b=s(7516),N=s(9832),T=s(3299),Z=s(3838),C=s(603),E=s(442),_=s(2831),S=s(7527);function P(e){var t=function(t){e.setTeamName(t.team_name),e.setProjectSelected(t.team_project),e.setCreationPhase(1)},s=(0,C.Z)(E.Z.useForm(),1)[0];return(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(E.Z,{form:s,layout:"vertical",name:"create team - part 1",onFinish:t,style:{width:"100%"},scrollToFirstError:!0,children:[(0,n.jsx)(E.Z.Item,{name:"team_name",label:"Team's Name",rules:[{required:!0,message:"Please enter valid Team name"},{min:5,message:"Team name must be atleast 5 characters long!"},{whitespace:!0,message:"Team name must be atleast 1 non-whitespace character!"},],children:(0,n.jsx)(_.Z,{placeholder:"Enter a Team name",value:e.teamName})}),(0,n.jsx)(E.Z.Item,{name:"team_project",label:"Team's Project",rules:[{required:!0,message:"Please select a Team project!"},],children:(0,n.jsx)(S.Z,{placeholder:"Select a project for the team",children:e.projects.map(function(e){return(0,n.jsx)(S.Z.Option,{value:e.id,children:e.project_name},e.id)})})}),(0,n.jsx)("button",{className:"bg-primary h-12 p-2 rounded-md flex flex-row justify-center items-center w-full text-lg font-semibold mt-4 disabled:opacity-50",disabled:e.loading,children:(0,n.jsx)("p",{children:"Next"})})]})})}function k(e){var t=function(t){e.setTeamDetails(t.team_description),e.setTeamDomainSelected(t.team_domain),e.setIsSubmitted(!0)},s=(0,C.Z)(E.Z.useForm(),1)[0];return(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(E.Z,{form:s,layout:"vertical",name:"create Team - part 2",onFinish:t,style:{width:"100%"},scrollToFirstError:!0,disabled:e.loading,children:[(0,n.jsx)(E.Z.Item,{name:"team_domain",label:"Team Domain",rules:[{required:!0,message:"Please select a Team Domain!"},],children:(0,n.jsx)(S.Z,{placeholder:"Select your a domain for the team",children:e.teamDomains.map(function(e){return(0,n.jsx)(S.Z.Option,{value:e.id,children:e.title},e.id)})})}),(0,n.jsx)(E.Z.Item,{name:"team_description",label:"Team Description",rules:[{required:!0,message:"Please enter valid Team description"},{min:5,message:"Team description must be atleast 5 characters long!"},{whitespace:!0,message:"Team description must be atleast 1 non-whitespace character!"},],children:(0,n.jsx)(_.Z,{placeholder:"Enter a Team description"})}),(0,n.jsx)("button",{className:"bg-primary h-12 p-2 rounded-md flex flex-row justify-center items-center w-full text-lg font-semibold mt-4 disabled:opacity-50",disabled:e.loading,children:e.loading?(0,n.jsxs)("svg",{class:"animate-spin -ml-1 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,n.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,n.jsx)("p",{children:"Create Team"})})]})})}function I(e){var t=(0,T.useSession)(),s=t.data;t.status;var a=(0,d.useState)(!1),l=a[0],i=a[1],o=(0,d.useState)(null),c=o[0],m=o[1],u=(0,d.useState)(null),x=u[0],f=u[1],h=(0,d.useState)(null),y=h[0],g=h[1],w=(0,d.useState)(null),C=w[0],E=w[1],_=(0,d.useState)(0),S=_[0],I=_[1],F=(0,d.useState)([]),z=F[0],A=F[1],D=(0,d.useState)([]),q=D[0],M=D[1],R=(0,d.useState)(!1),B=R[0],H=R[1],U=function(){var t={team_name:c,description:x,team_domain_id:y,project_id:C,user_id:s.user.id};console.log("Team Payload: ",t),(0,p.Cm)(t).then(function(t){console.log("Create:",t),(null==t?void 0:t.error)?(r.ZP.error("Team Creation failed!"),i(!1)):(r.ZP.success("Team Created successfully!"),e.setIsCreateTeam(!1),e.setIsRefreshTeams(!0))})};return(0,d.useEffect)(function(){i(!0),(0,p.YH)().then(function(e){console.log("Team Domains: ",e.data),A(e.data),i(!1)}),i(!0),(0,p.Yw)().then(function(e){console.log("Projects: ",e.data),M(e.data),i(!1)})},[]),(0,d.useEffect)(function(){B&&(I(2),i(!0),U(),H(!1))},[B]),(0,n.jsxs)("div",{className:"create-team-container h-full w-full fixed overflow-hidden top-0 left-0 flex justify-center items-start",children:[(0,n.jsx)(Z.E.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.15},className:"flex flex-col items-center z-10 w-full",children:(0,n.jsxs)("div",{className:"w-11/12 md:w-[25rem] lg:w-[35rem] mt-20 ",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center p-6 bg-gray-900 rounded-md",children:[(0,n.jsxs)("div",{className:"create-project-header flex flex-row justify-between w-full mb-6",children:[1==S||2==S?(0,n.jsxs)("button",{className:"back-btn flex flex-row items-center opacity-60 hover:opacity-100",onClick:function(){return I(0)},children:[(0,n.jsx)(b.YiX,{size:18}),(0,n.jsx)("h1",{className:"ml-2",children:"Back"})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("h1",{className:"font-bold text-lg"}),(0,n.jsx)("button",{className:"cancel-btn opacity-60 hover:opacity-100",onClick:function(){return e.setIsCreateTeam(!1)},children:(0,n.jsx)(v.ySC,{size:24})})]}),(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,n.jsx)("svg",{width:"123",height:"97",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{fill:"none","fill-rule":"evenodd",children:[(0,n.jsx)("circle",{fill:"#7B67EE",cx:"61.5",cy:"56.5",r:"39.5"}),(0,n.jsx)("path",{d:"M54.57 17.6A39.5 39.5 0 0 0 88.44 85.4 39.5 39.5 0 1 1 54.56 17.6z",fill:"#6C5AD4"}),(0,n.jsx)("path",{d:"M22.25 49.42a39.89 39.89 0 0 0-.54 10.1c-2.55 2.88-3.67 5.68-3.01 8.16 2.2 8.19 23.14 9.7 46.77 3.36 23.64-6.34 41.02-18.11 38.83-26.3-.73-2.74-3.57-4.73-7.9-5.93a39.65 39.65 0 0 0-5.3-7.98c17.32-.7 29.74 2.67 31.64 9.76 3.04 11.32-21.92 27.84-55.75 36.9C33.17 86.57 3.3 84.74.26 73.42c-1.88-7 6.96-16 21.99-24z",fill:"#C1B6FF",opacity:".4"}),(0,n.jsx)("path",{d:"M22 50.97a39.7 39.7 0 0 0-.2 1.54C12.4 58.61 7.24 65.1 8.66 70.37c2.7 10.11 28.57 11.97 57.76 4.15 29.19-7.82 50.65-22.36 47.94-32.47-1.46-5.45-9.64-8.5-21.45-8.94-.26-.36-.54-.72-.82-1.08 15.21-.26 25.97 2.95 27.68 9.36 2.89 10.77-20.86 26.49-53.03 35.11-32.18 8.62-60.6 6.88-63.5-3.89C1.55 66.3 9.04 58.26 22 50.97zm-.32 3.13c-.05.72-.07 1.45-.08 2.18-5.35 4.38-8.05 8.78-7.05 12.5 2.4 9 25.38 10.64 51.3 3.7 25.94-6.95 45.01-19.87 42.6-28.85-1.05-3.94-6.05-6.47-13.52-7.48-.36-.6-.74-1.2-1.13-1.77 9.9.72 16.67 3.57 17.95 8.36 2.58 9.62-17.83 23.44-45.58 30.88-27.76 7.44-52.35 5.67-54.92-3.95-1.24-4.6 2.81-10.19 10.43-15.57z",fill:"#C1B6FF",opacity:".4"}),(0,n.jsx)("circle",{fill:"#B4A7FF",cx:"34.5",cy:"29.5",r:"12.5"}),(0,n.jsx)("path",{d:"M29.45 18.06a12.5 12.5 0 0 0 15.1 18.88 12.5 12.5 0 1 1-15.1-18.88z",fill:"#9A8CED"}),(0,n.jsx)("path",{d:"M104.72 6.72l1.84-5.24a1 1 0 0 1 1.88 0l1.84 5.24 5.24 1.84a1 1 0 0 1 0 1.88l-5.24 1.84-1.84 5.24a1 1 0 0 1-1.88 0l-1.84-5.24-5.24-1.84a1 1 0 0 1 0-1.88l5.24-1.84zM75.93 4.93l.63-1.8a1 1 0 0 1 1.88 0l.63 1.8 1.8.63a1 1 0 0 1 0 1.88l-1.8.63-.63 1.8a1 1 0 0 1-1.88 0l-.63-1.8-1.8-.63a1 1 0 0 1 0-1.88l1.8-.63zM17.78 92.78l.28-.8a1 1 0 0 1 1.88 0l.28.8.8.28a1 1 0 0 1 0 1.88l-.8.28-.28.8a1 1 0 0 1-1.88 0l-.28-.8-.8-.28a1 1 0 0 1 0-1.88l.8-.28z",fill:"#E6E2FF"})]})}),(0,n.jsx)("h1",{className:"font-bold text-xl my-4",children:"Create a new Team"})]}),(0,n.jsx)(j.Z,{width:"w-full"}),(0,n.jsx)("div",{className:"w-full my-4",children:0==S?(0,n.jsx)(P,{setTeamName:m,teamName:c,setCreationPhase:I,loading:l,projects:q,setProjectSelected:E}):(0,n.jsx)(k,{loading:l,setTeamDetails:f,setCreationPhase:I,teamDomains:z,setTeamDomainSelected:g,setIsSubmitted:H})})]}),(0,n.jsx)("div",{className:"w-full flex justify-center items-center mt-8",children:(0,n.jsx)(N.Z,{current:S,labelPlacement:"vertical",items:[{title:"Name"},{title:"Details"},{title:"Create"},]})})]})}),(0,n.jsx)(Z.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"h-full w-full bg-black bg-opacity-75 absolute top-0 left-0 z-0"})]})}var F=s(8193),z=s(1290),A=s(381),D=s.n(A),q=s(3802);function M(e){var t,s=e.teamId,i=e.isNewEmployee,o=e.setisNewEmployee,m=e.setIsEmployeeProfile,u=e.ownerId,x=(0,d.useState)(),f=x[0],h=x[1],j=(0,d.useState)(!1),y=j[0],g=j[1],w=(t=(0,a.Z)(function(){return(0,l.__generator)(this,function(e){switch(e.label){case 0:return g(!0),[4,(0,p.qs)(s).then(function(e){var t=e.result;console.log("TeamEmployeesData:",t),t&&g(!1),h(t)})];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),v=function(e){(0,p.oZ)(e,s,u).then(function(e){console.log(e),e.error?r.ZP.error("Error while removing employee from team!"):(w(),r.ZP.success("Sucessfully removed employee from Team!"))})},b=function(e){console.log(e),r.ZP.error("Click on No")};return(0,d.useEffect)(function(){i&&(w(),o(!1))},[i]),(0,d.useEffect)(function(){w()},[]),(0,n.jsx)("div",{className:"flex flex-col justify-center items-center -mt-4",children:(0,n.jsx)("div",{className:"project_employees_data_table w-full",children:(0,n.jsx)(z.Z,{columns:[{title:"Name",width:100,render:function(e,t){var s=t.first_name,a=t.last_name,l=t.id;return(0,n.jsx)("div",{className:"underline cursor-pointer",onClick:function(){return m({id:l})},children:(0,n.jsxs)("h1",{children:[s," ",a]})})},key:"name",fixed:"left"},{title:"Age",width:100,dataIndex:"date_of_birth",key:"age",sorter:!0,render:function(e,t){var s=t.date_of_birth,a=D()().diff(s,"years",!1);return(0,n.jsxs)("p",{children:[a," years"]})}},{title:"Gender",dataIndex:"gender",key:"gender"},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone Number",dataIndex:"phone_number",key:"phone_number"},{title:"Designation",dataIndex:"designation",render:function(e,t){var s=t.Designation;return(0,n.jsx)("div",{children:(0,n.jsx)("h1",{children:s.title})})}},{title:"Expertise",dataIndex:"expertise",key:"expertise"},{title:"Action",key:"id",fixed:"right",width:100,render:function(e,t){var s=t.id;return(0,n.jsx)(q.Z,{grantPermissionFor:"manage_teams",children:(0,n.jsx)(c.Z,{title:"Remove Employee from project",description:"Are you sure to remove this employee from projectorate?",onConfirm:function(){v(s)},onCancel:b,okText:"Confirm",cancelText:"No",placement:"topLeft",children:(0,n.jsx)("button",{className:"p-2 bg-red-500 rounded-md text-sm text-white",children:"Remove"})})})}},],dataSource:f,scroll:{x:1e3},className:"rounded-t-none",loading:y})})})}var R=s(629),B=s(9327),H=s(7106);function U(e){var t=function(t){(0,p.uw)(e.teamId,t,e.ownerId).then(function(t){console.log(t),t.error?404==t.error.data.error?r.ZP.error("Project, team or employee not found!"):403==t.error.data.error&&r.ZP.warning("Employee is already assigned to this project!"):(r.ZP.success("Employee Sucessfully Added to the Team!"),e.setAssignEmployeesPanel(!1),e.setisNewEmployee(!0))})},s=function(){},a=(0,d.useState)(!1),l=a[0],i=a[1],o=(0,d.useState)([]),m=o[0],u=o[1];return(0,d.useEffect)(function(){i(!0),(0,p.lU)(e.projectId).then(function(e){e.error?(i(!1),r.ZP.error("Some error occoured while fetching project employees!")):(u(e.result),i(!1),console.log(e.result))})},[]),(0,n.jsxs)(R.Z,{title:"Assign Employee",onClose:function(){return e.setAssignEmployeesPanel(!1)},open:e.assignEmployeesPanel,bodyStyle:{paddingBottom:80},children:[(0,n.jsx)("h1",{className:"opacity-50 mb-4",children:"Note: Only the employees which are added in to project of this team are allowed to assign. If you want to add another employee to this team, first add him/her to this teams project!"}),(0,n.jsx)(j.Z,{color:"bg-gray-600",width:"w-full",opacity:"opacity-1"}),(0,n.jsxs)("div",{className:"mt-4 search-results",children:[l?(0,n.jsx)("div",{className:"w-full flex flex-col justify-center items-center",children:(0,n.jsxs)("svg",{class:"animate-spin -ml-1 h-10 w-10 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,n.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):0==m.length?(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,n.jsx)(H.hlP,{size:100}),(0,n.jsx)("h1",{children:"No employees found in project!"})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("h1",{className:"mb-4 font-bold text-lg",children:"Available Employees"})}),m.map(function(e,a){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"employee-card flex flex-row justify-between items-center py-4 px-4 mb-2 bg-gray-800 bg-opacity-50 rounded-lg border-2 border-gray-600",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,n.jsx)("div",{className:"bg-gray-600 bg-opacity-50 rounded-md h-14 w-14 flex justify-center items-center",children:(0,n.jsx)("p",{className:"font-extrabold text-2xl opacity-40",children:e.first_name[0]})}),(0,n.jsxs)("div",{className:"ml-2",children:[(0,n.jsxs)("h1",{className:"font-semibold text-lg",children:[e.first_name," ",e.last_name]}),(0,n.jsxs)("h1",{className:"m-0 text-md",children:["@",e.email]})]})]}),(0,n.jsx)(c.Z,{title:"Are you sure you want to add ".concat(e.first_name," to this project?"),onConfirm:function(){return t(e.id)},onCancel:s,okText:"Confirm",cancelText:"No",placement:"topLeft",children:(0,n.jsx)("button",{className:"bg-primary py-1 px-2 rounded-md flex flex-row justify-center items-center",children:(0,n.jsx)(B.s7o,{size:26})})})]},e.id+a)})})]})]})}var O=s(1026),L=s(5936),V=s(1072),Y=s(7153),X=s(9146),G=s(6042),K=s(9396);function Q(e){var t=e.teamInformation,s=e.setIsUpdateTeam,a=function(e){m(!0);var a=(0,K.Z)((0,G.Z)({},e),{id:t.id,user_id:i.user.id});(0,p.fo)(a).then(function(e){console.log(e),e.data?(r.ZP.success("Team updated Sucessfully!"),s(!1),m(!1)):(r.ZP.error("Team update Failed!"),m(!1))})},l=(0,T.useSession)(),i=l.data;l.status;var o=(0,d.useState)(!1),c=o[0],m=o[1],u=(0,d.useState)([]),x=u[0],f=u[1],h=(0,C.Z)(E.Z.useForm(),1)[0];return(0,d.useEffect)(function(){m(!0),(0,p.YH)().then(function(e){f(e.data),m(!1)})},[]),(0,n.jsx)("div",{className:"md:ml-4",children:(0,n.jsxs)(E.Z,{form:h,layout:"vertical",name:"create team",onFinish:a,style:{width:"100%"},scrollToFirstError:!0,disabled:c,children:[(0,n.jsx)(E.Z.Item,{name:"team_name",rules:[{required:!0,message:"Please enter valid team name"},{min:5,message:"Team name must be atleast 5 characters long!"},{whitespace:!0,message:"Team name must be atleast 1 non-whitespace character!"},],children:(0,n.jsx)(_.Z,{placeholder:"Enter a team name",defaultValue:t.team_name})}),(0,n.jsx)(E.Z.Item,{name:"team_domain_id",rules:[{required:!0,message:"Please select a team Domain!"},],children:(0,n.jsx)(S.Z,{placeholder:"Select your a domain for the team",children:x.map(function(e){return(0,n.jsx)(S.Z.Option,{value:e.id,children:e.title},e.id)})})}),(0,n.jsx)(E.Z.Item,{name:"description",rules:[{required:!0,message:"Please enter valid team description"},{min:5,message:"Team description must be atleast 5 characters long!"},{whitespace:!0,message:"Team description must be atleast 1 non-whitespace character!"},],children:(0,n.jsx)(_.Z,{placeholder:"Enter a Team description",defaultValue:t.description})}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"bg-white bg-opacity-10 hover:bg-opacity-20 transition-all w-24 h-10 p-2 mr-2 rounded-md flex flex-row justify-center items-center text-lg font-semibold mt-4 disabled:opacity-50",onClick:function(){return s(!1)},children:(0,n.jsx)("p",{children:"Cancel"})}),(0,n.jsx)("button",{className:"bg-primary w-24 h-10 p-2 rounded-md flex flex-row justify-center items-center text-lg font-semibold mt-4 disabled:opacity-50",disabled:c,children:c?(0,n.jsxs)("svg",{class:"animate-spin -ml-1 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,n.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,n.jsx)("p",{children:"Update"})})]})]})})}var $=["Employees","Tickets"];function J(){var e,t,s=function(e){el(e),_.push({pathname:"/app/u/teams",query:{teamId:e.id,teamName:e.name},shallow:!0})},b=function(){el(null),ei(null),_.replace({query:void 0,shallow:!0})},N=function(){(0,p.ps)(ea.id,eD.user.id).then(function(e){e.error?r.ZP.error("Error deleting Team!"):(r.ZP.success("Team Sucessfully deleted!"),b())})},Z=function(){},C=function(e){return B.find(function(t){return t.id==e})},E=function(e){eb(e)},_=(0,u.useRouter)(),S=(0,d.useState)([]),P=S[0],k=S[1],z=(0,d.useState)([]),A=z[0],D=z[1],R=(0,d.useState)([]),B=R[0],H=R[1],G=(0,d.useState)(!1),K=G[0],J=G[1],W=(0,d.useState)(!1),ee=W[0],et=W[1],es=(0,d.useState)(null),ea=es[0],el=es[1],en=(0,d.useState)(),er=en[0],ei=en[1],eo=(0,d.useState)(!1),ec=eo[0],em=eo[1],ed=(0,d.useState)(!1),eu=ed[0],ex=ed[1],ef=(0,d.useState)(!1),eh=ef[0],ej=ef[1],ep=(0,d.useState)(!1),ey=ep[0],eg=ep[1],ew=(0,d.useState)(1),ev=ew[0],eb=ew[1],eN=(0,d.useState)(!1),eT=eN[0],eZ=eN[1],eC=(0,d.useState)({id:null}),eE=eC[0],e_=eC[1],eS=(0,d.useState)(!1),eP=eS[0],ek=eS[1],eI=(0,d.useState)(!0),eF=eI[0],ez=eI[1],eA=(0,T.useSession)(),eD=eA.data;function eq(){return(eq=(0,a.Z)(function(){var e,t;return(0,l.__generator)(this,function(e){switch(e.label){case 0:return ez(!0),[4,(0,p.YH)()];case 1:return H(e.sent().data),ez(!1),[2]}})})).apply(this,arguments)}eA.status,(0,d.useEffect)(function(){eM(),function(){eq.apply(this,arguments)}()},[]);var eM=(e=(0,a.Z)(function(){return(0,l.__generator)(this,function(e){switch(e.label){case 0:return ez(!0),[4,(0,p.qX)().then(function(e){k(e.data),D(e.data),J(!1),ez(!1)})];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)});return(0,d.useEffect)(function(){K&&eM()},[K]),(0,d.useState)(function(){_.query.teamId&&_.query.teamName&&!eh&&(ej(!0),el({id:_.query.teamId,name:_.query.teamName}),(0,p.pH)(_.query.teamId).then(function(e){e.error?(404==e.error.error&&r.ZP.error("Team not found!"),b()):(console.log(e.data),ei(e.data))}))},[_.query,eh]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.Z,{grantPermissionFor:"manage_tickets",children:(0,n.jsxs)("div",{className:"absolute z-[999] bottom-4 right-4 flex flex-col items-end",children:[ey?(0,n.jsx)(O.Z,{setIsCreateTicket:eg}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("div",{className:"Create-ticket",onClick:function(){return eg(!0)},children:(0,n.jsx)(L.Z,{})})]})}),(0,n.jsxs)("div",{className:"teams",children:[(0,n.jsxs)("header",{className:"flex flex-row items-center justify-between border-b-2 border-b-gray-900 px-4 py-2 relative",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("div",{className:"teams-panel-icon mr-3",children:(0,n.jsx)(F.PQz,{size:26})}),(0,n.jsx)("h1",{className:"text-lg font-bold hidden sm:flex",children:"Teams Panel"})]}),(0,n.jsx)("div",{className:"absolute -bottom-0 left-16 sm:left-48",children:ea?(0,n.jsxs)("div",{className:"border-x-2 border-t-2 border-gray-900 bg-gray-900 rounded-t-md px-4 py-2 flex flex-row justify-between items-center",children:[(0,n.jsx)("p",{children:ea.name}),(0,n.jsx)("div",{className:"ml-4 opacity-30 hover:opacity-100 transition-all cursor-pointer",onClick:function(){return b()},children:(0,n.jsx)(v.ySC,{size:14})})]}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)("div",{className:"flex flex-row items-center",children:ea?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(q.Z,{grantPermissionFor:"manage_teams",children:(0,n.jsx)(i.Z,{placement:"bottom",title:"Create a new project in your company and add a workforce",mouseEnterDelay:.05,children:(0,n.jsxs)("button",{className:"bg-secondry mr-2 py-1 px-3 rounded-md flex flex-row justify-center items-center",onClick:function(){et(!0)},children:[(0,n.jsx)(f.gyF,{size:26}),(0,n.jsx)("p",{children:"Create Team"})]})})})})]}),ea&&er?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{assignEmployeesPanel:eu,setAssignEmployeesPanel:ex,setisNewEmployee:em,projectId:er.project.id,teamId:ea.id,ownerId:null==eD?void 0:eD.user.id}),(0,n.jsx)("div",{className:"".concat(ea.name,"-project bg-gray-900 bg-opacity-60"),children:(0,n.jsxs)("div",{className:"py-10 flex flex-col sm:flex-row justify-between sm:items-start px-3 sm:px-6",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-start items-start",children:[(0,n.jsx)("div",{className:"bg-gray-700 md:flex hidden lg:h-52 lg:w-52 md:h-32 md:w-32 h-24 w-24 rounded-lg flex justify-center items-center",children:(0,n.jsx)("p",{className:"font-extrabold lg:text-[10rem] md:text-6xl text-3xl opacity-40",children:ea.name[0]})}),eP?(0,n.jsx)(Q,{teamInformation:er,setIsUpdateTeam:ek}):(0,n.jsxs)("div",{className:"flex flex-col justify-center sm:ml-4",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold text-secondry ",children:[null==er?void 0:er.team_name.toUpperCase()," |"," ",null==er?void 0:er.project.project_name.toUpperCase()]}),(0,n.jsx)("p",{className:"font-medium mt-2 text-sm md:text-md lg:text-xl sm:w-32 lg:w-96 md:w-32 w-full",children:null==er?void 0:er.description}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(y.Z,{title:null===(t=C(null==er?void 0:er.teamDomainsId))||void 0===t?void 0:t.title,type:"intermediate",size:"lg"})})]})]}),(0,n.jsx)(q.Z,{grantPermissionFor:"manage_teams",children:(0,n.jsxs)("div",{className:"project-actions flex flex-row mt-4 sm:mt-0",children:[(0,n.jsx)(i.Z,{placement:"topRight",title:"Add employees to work on this team",mouseEnterDelay:.05,children:(0,n.jsx)("button",{className:"bg-white bg-opacity-10 hover:bg-opacity-25 transition-all mr-2 p-2 rounded-lg flex flex-row justify-center items-center",onClick:function(){return ex(!0)},children:(0,n.jsx)(F.Zev,{size:24})})}),(0,n.jsx)(i.Z,{placement:"topRight",title:"Edit this team",mouseEnterDelay:.05,children:(0,n.jsx)("button",{className:"".concat(eP?"bg-primary":"bg-white bg-opacity-10 hover:bg-opacity-25","  transition-all mr-2 p-2 rounded-lg flex flex-row justify-center items-center"),onClick:function(){return ek(!eP)},children:(0,n.jsx)(F.$iz,{size:24})})}),(0,n.jsx)(i.Z,{placement:"topRight",title:"Remove this team",mouseEnterDelay:.05,children:(0,n.jsx)(c.Z,{title:"Remove Team from Projectorate?",description:"Are you sure to remove this team? ",onConfirm:function(){N(ea.id)},onCancel:Z,okText:"Confirm",cancelText:"No",placement:"bottomLeft",children:(0,n.jsx)("button",{className:"bg-white bg-opacity-10 hover:bg-opacity-25 transition-all mr-2 p-2 rounded-lg flex flex-row justify-center items-center",children:(0,n.jsx)(x.Fuw,{size:24})})})})]})})]})}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(m.Z,{defaultActiveKey:"1",type:"card",size:32,onChange:function(e){E(e)},items:$.map(function(e,t){var s=String(t+1);return{label:"".concat(e),key:s}})})}),1==ev?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z,{isEmployeeProfile:eE,setIsEmployeeProfile:e_}),(0,n.jsx)(M,{teamId:ea.id,isNewEmployee:ec,setisNewEmployee:em,setIsEmployeeProfile:e_,ownerId:null==eD?void 0:eD.user.id})]}):2==ev?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y.Z,{isTicketInfo:eT,setIsTicketInfo:eZ}),(0,n.jsx)(V.Z,{teamId:ea.id,isNewEmployee:ec,setisNewEmployee:em,setIsTicketInfo:eZ})]}):(0,n.jsx)(n.Fragment,{})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"Search-Teams-section px-4 my-4",children:(0,n.jsx)(h.Z,{title:"SEARCH TEAMS",type:"teams",description:"Take a dive in to the teams and its attributes. Find anything you are looking for in this team",data:P,setFilteredData:D})}),(0,n.jsx)(j.Z,{color:"bg-gray-900",width:"w-full",opacity:"opacity-1"}),(0,n.jsxs)("div",{className:"All-teams-stack mt-4 px-4",children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("h1",{className:"font-bold text-xl",children:"ALL TEAMS"}),(0,n.jsx)("p",{className:"text-sm opacity-60 mt-1",children:"Projectorate."})]}),(0,n.jsxs)("div",{className:"Projects py-4",children:[eF||0!=A.length?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,n.jsx)(o.ZP,{status:"404",title:"No teams found!",subTitle:"Could not found teams, please create new team for your in your workspace."})}),(0,n.jsx)("div",{class:"inline-grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 grid-flow-row gap-4 w-full",children:K&&eF?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{}),(0,n.jsx)(w,{}),(0,n.jsx)(w,{}),(0,n.jsx)(w,{}),(0,n.jsx)(w,{}),(0,n.jsx)(w,{})]}):A.map(function(e){var t;return(0,n.jsx)("div",{className:"team_container cursor-pointer",onClick:function(){s({name:e.team_name,id:e.id})},children:(0,n.jsx)(g,{teamName:e.team_name,employeesCount:e._count.UserTeams,ticketsCount:e._count.Tickets,tagTitle:null===(t=C(e.teamDomainsId))||void 0===t?void 0:t.title})},e.id)})})]})]}),ee?(0,n.jsx)(I,{setIsRefreshTeams:J,setIsCreateTeam:et}):(0,n.jsx)(n.Fragment,{})]})]})]})}}},function(e){e.O(0,[874,955,57,90,907,993,838,48,488,774,888,179],function(){return e(e.s=6612)}),_N_E=e.O()}]);