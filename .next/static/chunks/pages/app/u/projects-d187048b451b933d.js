(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{1044:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/u/projects",function(){return s(3552)}])},3552:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return et}});var r=s(7568),n=s(655),i=s(5893),l=s(7294),a=s(5905),o=s(3588),c=s(6166),d=s(1649),m=s(8193),u=s(471),j=s(2453),x=s(6477),f=s(2181),p=s(5737),h=s(6275),y=s(5788),g=s(7516),w=s(9832),v=s(603),b=s(442),N=s(2831);function P(e){var t=function(t){e.setProjectName(t.project_name),e.setCreationPhase(1)},s=(0,v.Z)(b.Z.useForm(),1)[0];return(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)(b.Z,{form:s,layout:"vertical",name:"create project - part 1",onFinish:t,style:{width:"100%"},scrollToFirstError:!0,children:[(0,i.jsx)(b.Z.Item,{name:"project_name",label:"Project Name",rules:[{required:!0,message:"Please enter valid project name"},{min:5,message:"Project name must be atleast 5 characters long!"},{whitespace:!0,message:"Project name must be atleast 1 non-whitespace character!"},],children:(0,i.jsx)(N.Z,{placeholder:"Enter a project name",value:e.projectName})}),(0,i.jsx)("button",{className:"bg-primary h-12 p-2 rounded-md flex flex-row justify-center items-center w-full text-lg font-semibold mt-4 disabled:opacity-50",disabled:e.loading,children:(0,i.jsx)("p",{children:"Next"})})]})})}var Z=s(7527);function E(e){var t=function(t){e.setProjectDetails(t.project_description),e.setProjectDomainSelected(t.project_domain),e.setIsSubmitted(!0)},s=(0,v.Z)(b.Z.useForm(),1)[0];return(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)(b.Z,{form:s,layout:"vertical",name:"create project - part 2",onFinish:t,style:{width:"100%"},scrollToFirstError:!0,disabled:e.loading,children:[(0,i.jsx)(b.Z.Item,{name:"project_domain",label:"Project Domain",rules:[{required:!0,message:"Please select a Project Domain!"},],children:(0,i.jsx)(Z.Z,{placeholder:"Select your a domain for the project",children:e.projectDomains.map(function(e){return(0,i.jsx)(Z.Z.Option,{value:e.id,children:e.title},e.id)})})}),(0,i.jsx)(b.Z.Item,{name:"project_description",label:"Project Description",rules:[{required:!0,message:"Please enter valid project description"},{min:5,message:"Project description must be atleast 5 characters long!"},{whitespace:!0,message:"Project description must be atleast 1 non-whitespace character!"},],children:(0,i.jsx)(N.Z,{placeholder:"Enter a project description"})}),(0,i.jsx)("button",{className:"bg-primary h-12 p-2 rounded-md flex flex-row justify-center items-center w-full text-lg font-semibold mt-4 disabled:opacity-50",disabled:e.loading,children:e.loading?(0,i.jsxs)("svg",{class:"animate-spin -ml-1 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,i.jsx)("p",{children:"Create Project"})})]})})}var C=s(5636),_=s(3299),S=s(3838);function I(e){var t=(0,_.useSession)(),s=t.data;t.status;var r=(0,l.useState)(!1),n=r[0],a=r[1],c=(0,l.useState)(null),d=c[0],m=c[1],u=(0,l.useState)(null),x=u[0],f=u[1],p=(0,l.useState)(null),h=p[0],v=p[1],b=(0,l.useState)(0),N=b[0],Z=b[1],I=(0,l.useState)(null),k=I[0],F=I[1],T=(0,l.useState)(!1),z=T[0],D=T[1],A=function(){var t={project_name:d,description:x,project_domain_id:h,user_id:s.user.id};console.log("Project Payload: ",t),(0,C.$L)(t).then(function(t){console.log("Create:",t),(null==t?void 0:t.error)?(j.ZP.error("Project Creation failed!"),a(!1)):(j.ZP.success("Project Created successfully!"),e.setIsCreateProject(!1),e.setIsRefreshProjects(!0))})};return(0,l.useEffect)(function(){a(!0),(0,C.gA)().then(function(e){console.log("Project Domains: ",e.data),F(e.data),a(!1)})},[]),(0,l.useEffect)(function(){z&&(Z(2),a(!0),A(),D(!1))},[z]),(0,i.jsxs)("div",{className:"create-project-container h-full w-full fixed overflow-hidden top-0 left-0 flex justify-center items-start",children:[(0,i.jsx)(S.E.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.15},className:"flex flex-col items-center z-10 w-full",children:(0,i.jsxs)("div",{className:"w-11/12 md:w-[25rem] lg:w-[35rem] mt-20 ",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center p-6 bg-gray-900 rounded-md",children:[(0,i.jsxs)("div",{className:"create-project-header flex flex-row justify-between w-full mb-6",children:[1==N||2==N?(0,i.jsxs)("button",{className:"back-btn flex flex-row items-center opacity-60 hover:opacity-100",onClick:function(){return Z(0)},children:[(0,i.jsx)(g.YiX,{size:18}),(0,i.jsx)("h1",{className:"ml-2",children:"Back"})]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("h1",{className:"font-bold text-lg"}),(0,i.jsx)("button",{className:"cancel-btn opacity-60 hover:opacity-100",onClick:function(){return e.setIsCreateProject(!1)},children:(0,i.jsx)(y.ySC,{size:24})})]}),(0,i.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,i.jsx)("svg",{width:"123",height:"97",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsxs)("g",{fill:"none","fill-rule":"evenodd",children:[(0,i.jsx)("circle",{fill:"#7B67EE",cx:"61.5",cy:"56.5",r:"39.5"}),(0,i.jsx)("path",{d:"M54.57 17.6A39.5 39.5 0 0 0 88.44 85.4 39.5 39.5 0 1 1 54.56 17.6z",fill:"#6C5AD4"}),(0,i.jsx)("path",{d:"M22.25 49.42a39.89 39.89 0 0 0-.54 10.1c-2.55 2.88-3.67 5.68-3.01 8.16 2.2 8.19 23.14 9.7 46.77 3.36 23.64-6.34 41.02-18.11 38.83-26.3-.73-2.74-3.57-4.73-7.9-5.93a39.65 39.65 0 0 0-5.3-7.98c17.32-.7 29.74 2.67 31.64 9.76 3.04 11.32-21.92 27.84-55.75 36.9C33.17 86.57 3.3 84.74.26 73.42c-1.88-7 6.96-16 21.99-24z",fill:"#C1B6FF",opacity:".4"}),(0,i.jsx)("path",{d:"M22 50.97a39.7 39.7 0 0 0-.2 1.54C12.4 58.61 7.24 65.1 8.66 70.37c2.7 10.11 28.57 11.97 57.76 4.15 29.19-7.82 50.65-22.36 47.94-32.47-1.46-5.45-9.64-8.5-21.45-8.94-.26-.36-.54-.72-.82-1.08 15.21-.26 25.97 2.95 27.68 9.36 2.89 10.77-20.86 26.49-53.03 35.11-32.18 8.62-60.6 6.88-63.5-3.89C1.55 66.3 9.04 58.26 22 50.97zm-.32 3.13c-.05.72-.07 1.45-.08 2.18-5.35 4.38-8.05 8.78-7.05 12.5 2.4 9 25.38 10.64 51.3 3.7 25.94-6.95 45.01-19.87 42.6-28.85-1.05-3.94-6.05-6.47-13.52-7.48-.36-.6-.74-1.2-1.13-1.77 9.9.72 16.67 3.57 17.95 8.36 2.58 9.62-17.83 23.44-45.58 30.88-27.76 7.44-52.35 5.67-54.92-3.95-1.24-4.6 2.81-10.19 10.43-15.57z",fill:"#C1B6FF",opacity:".4"}),(0,i.jsx)("circle",{fill:"#B4A7FF",cx:"34.5",cy:"29.5",r:"12.5"}),(0,i.jsx)("path",{d:"M29.45 18.06a12.5 12.5 0 0 0 15.1 18.88 12.5 12.5 0 1 1-15.1-18.88z",fill:"#9A8CED"}),(0,i.jsx)("path",{d:"M104.72 6.72l1.84-5.24a1 1 0 0 1 1.88 0l1.84 5.24 5.24 1.84a1 1 0 0 1 0 1.88l-5.24 1.84-1.84 5.24a1 1 0 0 1-1.88 0l-1.84-5.24-5.24-1.84a1 1 0 0 1 0-1.88l5.24-1.84zM75.93 4.93l.63-1.8a1 1 0 0 1 1.88 0l.63 1.8 1.8.63a1 1 0 0 1 0 1.88l-1.8.63-.63 1.8a1 1 0 0 1-1.88 0l-.63-1.8-1.8-.63a1 1 0 0 1 0-1.88l1.8-.63zM17.78 92.78l.28-.8a1 1 0 0 1 1.88 0l.28.8.8.28a1 1 0 0 1 0 1.88l-.8.28-.28.8a1 1 0 0 1-1.88 0l-.28-.8-.8-.28a1 1 0 0 1 0-1.88l.8-.28z",fill:"#E6E2FF"})]})}),(0,i.jsx)("h1",{className:"font-bold text-xl my-4",children:"Create a new Project"})]}),(0,i.jsx)(o.Z,{width:"w-full"}),(0,i.jsx)("div",{className:"w-full my-4",children:0==N?(0,i.jsx)(P,{setProjectName:m,projectName:d,setCreationPhase:Z,loading:n}):(0,i.jsx)(E,{loading:n,setProjectDetails:f,setCreationPhase:Z,projectDomains:k,setProjectDomainSelected:v,setIsSubmitted:D})})]}),(0,i.jsx)("div",{className:"w-full flex justify-center items-center mt-8",children:(0,i.jsx)(w.Z,{current:N,labelPlacement:"vertical",items:[{title:"Name"},{title:"Details"},{title:"Create"},]})})]})}),(0,i.jsx)(S.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"h-full w-full bg-black bg-opacity-75 absolute top-0 left-0 z-0"})]})}function k(){return(0,i.jsxs)("div",{className:"animate-pulse h-44 w-full md:w-96 bg-gray-700 rounded-md shadow-sm p-6 flex flex-col justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)("div",{className:"rounded-lg w-14 h-14 bg-gray-600 flex justify-center items-center"}),(0,i.jsxs)("div",{className:"projects-container-main-info ml-3",children:[(0,i.jsx)("h4",{className:"pb-1 text-xl font-semibold h-6 w-32 rounded-md bg-gray-600"}),(0,i.jsx)("div",{className:"project-tags flex flex-row",children:(0,i.jsx)("h4",{className:"mt-4 text-xl font-semibold h-4 w-24 rounded-md bg-gray-600"})})]})]}),(0,i.jsxs)("div",{className:"projects-attributes flex flex-row justify-between",children:[(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("div",{className:"rounded-lg w-20 h-10 bg-gray-600 flex justify-center items-center"})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("div",{className:"rounded-lg w-20 h-10 bg-gray-600 flex justify-center items-center"})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("div",{className:"rounded-lg w-20 h-10 bg-gray-600 flex justify-center items-center"})})]})]})}var F=s(1163),T=s(7597),z=s(1290),D=s(381),A=s.n(D),R=s(3802);function q(e){var t,s=e.projectId,a=e.isNewEmployee,o=e.setisNewEmployee,c=e.setIsEmployeeProfile,d=e.ownerId,m=(0,l.useState)(),u=m[0],x=m[1],f=(0,l.useState)(!1),h=f[0],y=f[1],g=(t=(0,r.Z)(function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return y(!0),[4,(0,C.lU)(s).then(function(e){var t=e.result;console.log("ProjectEmployeesData:",t),t&&y(!1),x(t)})];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),w=function(e){(0,C.ah)(e,s,d).then(function(e){console.log(e),e.error?j.ZP.error("Error while removing employee!"):(g(),j.ZP.success("Sucessfully removed employee from project!"))})},v=function(e){};return(0,l.useEffect)(function(){a&&(g(),o(!1))},[a]),(0,l.useEffect)(function(){g()},[]),(0,i.jsx)("div",{className:"flex flex-col justify-center items-center -mt-4",children:(0,i.jsx)("div",{className:"project_employees_data_table w-full",children:(0,i.jsx)(z.Z,{columns:[{title:"Name",width:100,render:function(e,t){var s=t.first_name,r=t.last_name,n=t.id;return(0,i.jsx)("div",{className:"underline cursor-pointer",onClick:function(){return c({id:n})},children:(0,i.jsxs)("h1",{children:[s," ",r]})})},key:"name",fixed:"left"},{title:"Age",width:100,dataIndex:"date_of_birth",key:"age",sorter:!0,render:function(e,t){var s=t.date_of_birth,r=A()().diff(s,"years",!1);return(0,i.jsxs)("p",{children:[r," years"]})}},{title:"Gender",dataIndex:"gender",key:"gender"},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone Number",dataIndex:"phone_number",key:"phone_number"},{title:"Designation",dataIndex:"designation",render:function(e,t){var s=t.Designation;return(0,i.jsx)("div",{children:(0,i.jsx)("h1",{children:s.title})})}},{title:"Expertise",dataIndex:"expertise",key:"expertise"},{title:"Action",key:"id",fixed:"right",width:100,render:function(e,t){var s=t.id;return(0,i.jsx)(R.Z,{grantPermissionFor:"manage_projects",children:(0,i.jsx)(p.Z,{title:"Remove Employee from project",description:"Are you sure to remove this employee from projectorate?",onConfirm:function(){w(s)},onCancel:v,okText:"Confirm",cancelText:"No",placement:"topLeft",children:(0,i.jsx)("button",{className:"p-2 bg-red-500 rounded-md text-sm text-white",children:"Remove"})})})}},],dataSource:u,scroll:{x:1e3},className:"rounded-none",style:{borderRadius:"0 !impotant"},loading:h,rowClassName:function(){return"team-employees"}})})})}var M=s(629),B=s(2983),L=s(9327);function O(e){var t=function(e){console.log(e),(0,C.g8)(e.SearchEmployee).then(function(e){e.error||(d(e.data.result),console.log(e.data.result))})},s=function(t,s){(0,C.r2)(t,s,e.ownerId).then(function(t){console.log(t),t.error?j.ZP.error("Some Error Occured while adding Employee to the project!"):(j.ZP.success("Employee Sucessfully Added to the project!"),e.setAssignEmployeesPanel(!1),e.setisNewEmployee(!0))})},r=function(){},n=(0,l.useState)(!1),a=n[0];n[1];var o=(0,l.useState)([]),c=o[0],d=o[1],u=(0,v.Z)(b.Z.useForm(),1)[0];return(0,i.jsxs)(M.Z,{title:"Assign Employee",onClose:function(){return e.setAssignEmployeesPanel(!1)},open:e.assignEmployeesPanel,bodyStyle:{paddingBottom:80},children:[(0,i.jsxs)(b.Z,{form:u,name:"assignEmployees",onFinish:t,style:{width:"100%"},scrollToFirstError:!0,disabled:a,type:"submit",children:[(0,i.jsx)(b.Z.Item,{name:"SearchEmployee",rules:[{required:!0,message:"Please input something to search for employees"},],children:(0,i.jsx)(N.Z,{placeholder:"Search Employees"})}),(0,i.jsxs)("button",{className:"bg-secondry w-full py-2 px-3 rounded-md transition-all text-white flex justify-center items-center",type:"submit",children:[(0,i.jsx)(m.RB5,{size:18}),(0,i.jsx)("p",{className:"ml-2",children:"Search"})]})]}),(0,i.jsxs)("div",{className:"mt-4 search-results",children:[a&&0==c.length?(0,i.jsx)("div",{className:"w-full flex flex-col justify-center items-center",children:(0,i.jsxs)("svg",{class:"animate-spin -ml-1 h-10 w-10 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):0==c.length?(0,i.jsx)(B.Z,{image:B.Z.PRESENTED_IMAGE_SIMPLE,description:"No employees found!"}):(0,i.jsx)(i.Fragment,{}),c.map(function(t,n){return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"employee-card flex flex-row justify-between items-center py-4 px-4 mb-2 bg-gray-800 bg-opacity-50 rounded-lg border-2 border-gray-600",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,i.jsx)("div",{className:"bg-gray-600 bg-opacity-50 rounded-md h-14 w-14 flex justify-center items-center",children:(0,i.jsx)("p",{className:"font-extrabold text-2xl opacity-40",children:t.first_name[0]})}),(0,i.jsxs)("div",{className:"ml-2",children:[(0,i.jsxs)("h1",{className:"font-semibold text-lg",children:[t.first_name," ",t.last_name]}),(0,i.jsxs)("h1",{className:"m-0 text-md",children:["@",t.email]})]})]}),(0,i.jsx)(p.Z,{title:"Are you sure you want to add ".concat(t.first_name," to this project?"),onConfirm:function(){return s(e.projectId,t.id)},onCancel:r,okText:"Confirm",cancelText:"No",placement:"topLeft",children:(0,i.jsx)("button",{className:"bg-primary py-1 px-2 rounded-md flex flex-row justify-center items-center",children:(0,i.jsx)(L.s7o,{size:26})})})]},t.id+n)})})]})]})}var V=s(5936),U=s(1026),H=s(1664),X=s.n(H);function J(e){var t,s=e.projectId,a=e.isNewEmployee,o=e.setisNewEmployee,c=(0,l.useState)(),d=c[0],m=c[1],u=(0,l.useState)(!1),x=u[0],f=u[1],h=(t=(0,r.Z)(function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return f(!0),[4,(0,C.T8)(s).then(function(e){e.data?(f(!1),m(e.data)):j.ZP.error("Error while fetching project teams!")})];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),y=function(e){console.log(e),(0,C.ps)(e).then(function(e){console.log(e),e.error?j.ZP.error("Error while removing team from project!"):(h(),j.ZP.success("Sucessfully removed team from project!"))})},g=function(e){};return(0,l.useEffect)(function(){a&&(h(),o(!1))},[a]),(0,l.useEffect)(function(){h()},[]),(0,i.jsx)("div",{className:"flex flex-col justify-center items-center -mt-4",children:(0,i.jsx)("div",{className:"project_employees_data_table w-full",children:(0,i.jsx)(z.Z,{columns:[{title:"Team Name",width:150,render:function(e,t){var s=t.team_name,r=t.id;return(0,i.jsx)(X(),{href:"/app/u/teams?teamId=".concat(r,"&teamName=").concat(s),children:(0,i.jsx)("h1",{className:"cursor-pointer underline",children:s})})},key:"team_name",fixed:"left"},{title:"Description",dataIndex:"description",width:400,key:"description"},{title:"Project",render:function(e,t){var s=t.project;return(0,i.jsx)(T.Z,{title:s.project_name,type:"secondry",size:"md"})},key:"projectId"},{title:"Team Domain",render:function(e,t){var s=t.TeamDomains;return(0,i.jsx)(T.Z,{title:s.title,type:"pOrange",size:"md"})},key:"teamDomainsId"},{title:"Action",key:"id",fixed:"right",width:100,render:function(e,t){var s=t.id;return(0,i.jsx)(R.Z,{grantPermissionFor:"manage_projects",children:(0,i.jsx)(p.Z,{title:"Remove Team from project",description:"Are you sure to remove this team from project?",onConfirm:function(){y(s)},onCancel:g,okText:"Confirm",cancelText:"No",placement:"topLeft",children:(0,i.jsx)("button",{className:"p-2 bg-red-500 rounded-md text-sm text-white",children:"Remove"})})})}},],dataSource:d,scroll:{x:1e3},className:"rounded-none",style:{borderRadius:"0 !impotant"},loading:x,rowClassName:function(){return"team-employees"}})})})}var G=s(1072),Y=s(7153),$=s(9146),K=s(6042),Q=s(9396);function W(e){var t=e.projectInformation,s=e.setIsUpdateProject,r=function(e){d(!0);var r=(0,Q.Z)((0,K.Z)({},e),{id:t.id,user_id:a.user.id});(0,C.Jh)(r).then(function(e){e.data?(j.ZP.success("Project updated Sucessfully!"),s(!1),d(!1)):(j.ZP.error("Project update Failed!"),d(!1))})},n=(0,_.useSession)(),a=n.data;n.status;var o=(0,l.useState)(!1),c=o[0],d=o[1],m=(0,l.useState)([]),u=m[0],x=m[1],f=(0,v.Z)(b.Z.useForm(),1)[0];return(0,l.useEffect)(function(){d(!0),(0,C.gA)().then(function(e){console.log("Project Domains: ",e.data),x(e.data),d(!1)})},[]),(0,i.jsx)("div",{className:"md:ml-4",children:(0,i.jsxs)(b.Z,{form:f,layout:"vertical",name:"create project - part 1",onFinish:r,style:{width:"100%"},scrollToFirstError:!0,disabled:c,children:[(0,i.jsx)(b.Z.Item,{name:"project_name",rules:[{required:!0,message:"Please enter valid project name"},{min:5,message:"Project name must be atleast 5 characters long!"},{whitespace:!0,message:"Project name must be atleast 1 non-whitespace character!"},],children:(0,i.jsx)(N.Z,{placeholder:"Enter a project name",defaultValue:t.project_name})}),(0,i.jsx)(b.Z.Item,{name:"project_domain_id",rules:[{required:!0,message:"Please select a Project Domain!"},],children:(0,i.jsx)(Z.Z,{placeholder:"Select your a domain for the project",children:u.map(function(e){return(0,i.jsx)(Z.Z.Option,{value:e.id,children:e.title},e.id)})})}),(0,i.jsx)(b.Z.Item,{name:"description",rules:[{required:!0,message:"Please enter valid project description"},{min:5,message:"Project description must be atleast 5 characters long!"},{whitespace:!0,message:"Project description must be atleast 1 non-whitespace character!"},],children:(0,i.jsx)(N.Z,{placeholder:"Enter a project description",defaultValue:t.description})}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("button",{className:"bg-white bg-opacity-10 hover:bg-opacity-20 transition-all w-24 h-10 p-2 mr-2 rounded-md flex flex-row justify-center items-center text-lg font-semibold mt-4 disabled:opacity-50",onClick:function(){return s(!1)},children:(0,i.jsx)("p",{children:"Cancel"})}),(0,i.jsx)("button",{className:"bg-primary w-24 h-10 p-2 rounded-md flex flex-row justify-center items-center text-lg font-semibold mt-4 disabled:opacity-50",disabled:c,children:c?(0,i.jsxs)("svg",{class:"animate-spin -ml-1 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,i.jsx)("p",{children:"Update"})})]})]})})}var ee=["Employees","Teams","Tickets"];function et(){var e,t,s=function(e){ei(e),P.push({pathname:"/app/u/projects",query:{projectId:e.id,projectName:e.name},shallow:!0})},g=function(){ei(null),eo(null),P.replace({pathname:"/app/u/projects",query:void 0,shallow:!0})},w=function(){(0,C.Qo)(en.id,null==ez?void 0:ez.user.id).then(function(e){e.error?j.ZP.error("Error deleting project!"):(j.ZP.success("Project Sucessfully deleted!"),g())})},v=function(){},b=function(e){return B.find(function(t){return t.id==e})},N=function(e){ew(e)},P=(0,F.useRouter)(),Z=(0,l.useState)([]),E=Z[0],S=Z[1],z=(0,l.useState)([]),D=z[0],A=z[1],M=(0,l.useState)([]),B=M[0],L=M[1],H=(0,l.useState)(!1),X=H[0],K=H[1],Q=(0,l.useState)(!1),et=Q[0],es=Q[1],er=(0,l.useState)(null),en=er[0],ei=er[1],el=(0,l.useState)(),ea=el[0],eo=el[1],ec=(0,l.useState)(!1),ed=ec[0],em=ec[1],eu=(0,l.useState)(!1),ej=eu[0],ex=eu[1],ef=(0,l.useState)(!1),ep=ef[0],eh=ef[1],ey=(0,l.useState)(1),eg=ey[0],ew=ey[1],ev=(0,l.useState)({id:null}),eb=ev[0],eN=ev[1],eP=(0,l.useState)({id:null}),eZ=eP[0],eE=eP[1],eC=(0,l.useState)(!1),e_=eC[0],eS=eC[1],eI=(0,l.useState)(!0),ek=eI[0],eF=eI[1],eT=(0,_.useSession)(),ez=eT.data;function eD(){return(eD=(0,r.Z)(function(){var e,t;return(0,n.__generator)(this,function(t){switch(t.label){case 0:return e=null,[4,(0,C.gA)()];case 1:return e=t.sent().data,S(E),L(e),[2]}})})).apply(this,arguments)}eT.status,(0,l.useEffect)(function(){!function(){return eD.apply(this,arguments)}(),eA()},[]);var eA=(e=(0,r.Z)(function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return eF(!0),[4,(0,C.Yw)().then(function(e){S(e.data),A(e.data),es(!1),eF(!1)})];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)});return(0,l.useEffect)(function(){et&&eA()},[et]),(0,l.useState)(function(){P.query.projectId&&P.query.projectName&&(ei({id:P.query.projectId,name:P.query.projectName}),(0,C.mX)(P.query.projectId).then(function(e){e.error?(404==e.error.error&&j.ZP.error("Team not found!"),g()):(console.log(e.data),eo(e.data))}))},[P.query]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Z,{grantPermissionFor:"manage_tickets",children:(0,i.jsxs)("div",{className:"fixed z-[999] bottom-4 right-4 flex flex-col items-end",children:[ep?(0,i.jsx)(U.Z,{setIsCreateTicket:eh}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("div",{className:"Create-ticket",onClick:function(){return eh(!0)},children:(0,i.jsx)(V.Z,{})})]})}),(0,i.jsxs)("div",{className:"Project-panel",children:[(0,i.jsxs)("header",{className:"flex flex-row items-center justify-between border-b-2 border-b-gray-900 px-4 py-2 relative",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center",children:[(0,i.jsx)("div",{className:"project-panel-icon mr-3",children:(0,i.jsx)(d.hVy,{size:26})}),(0,i.jsx)("h1",{className:"text-lg font-bold hidden sm:flex",children:"Project Panel"})]}),(0,i.jsx)("div",{className:"absolute -bottom-0 left-16 sm:left-52",children:en?(0,i.jsxs)("div",{className:"border-x-2 border-t-2 border-gray-900 bg-gray-900 rounded-t-md px-4 py-2 flex flex-row justify-between items-center",children:[(0,i.jsx)("p",{children:en.name}),(0,i.jsx)("div",{className:"ml-4 opacity-30 hover:opacity-100 transition-all cursor-pointer",onClick:function(){return g()},children:(0,i.jsx)(y.ySC,{size:14})})]}):(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)("div",{className:"flex flex-row items-center",children:en?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(R.Z,{grantPermissionFor:"manage_projects",children:(0,i.jsx)(x.Z,{placement:"bottom",title:"Create a new project in your company and add a workforce",mouseEnterDelay:.05,children:(0,i.jsxs)("button",{className:"bg-secondry mr-2 py-1 px-3 rounded-md flex flex-row justify-center items-center",onClick:function(){return!K(!X)},children:[(0,i.jsx)(d.gyF,{size:26}),(0,i.jsx)("p",{children:"Create Project"})]})})})})]}),en&&ea?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O,{assignEmployeesPanel:ed,setAssignEmployeesPanel:em,setisNewEmployee:ex,projectId:en.id,ownerId:null==ez?void 0:ez.user.id}),(0,i.jsx)("div",{className:"".concat(en.name,"-project bg-gray-900 bg-opacity-60"),children:(0,i.jsxs)("div",{className:"py-10 flex flex-col sm:flex-row justify-between sm:items-start px-3 sm:px-6",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-start items-start",children:[(0,i.jsx)("div",{className:"bg-gray-700 md:flex hidden lg:h-52 lg:w-52 md:h-32 md:w-32 h-24 w-24 rounded-lg flex justify-center items-center",children:(0,i.jsx)("p",{className:"font-extrabold lg:text-[10rem] md:text-6xl text-3xl opacity-40",children:en.name[0]})}),e_?(0,i.jsx)(W,{projectInformation:ea,setIsUpdateProject:eS}):(0,i.jsxs)("div",{className:"flex flex-col justify-center sm:ml-4",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-secondry ",children:null==ea?void 0:ea.project_name.toUpperCase()}),(0,i.jsx)("p",{className:"font-medium mt-2 text-sm md:text-md lg:text-xl sm:w-32 lg:w-96 md:w-32 w-full",children:null==ea?void 0:ea.description}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(T.Z,{title:null===(t=b(null==ea?void 0:ea.projectDomainsId))||void 0===t?void 0:t.title,type:"intermediate",size:"lg"})})]})]}),(0,i.jsx)(R.Z,{grantPermissionFor:"manage_projects",children:(0,i.jsxs)("div",{className:"project-actions flex flex-row mt-4 sm:mt-0",children:[(0,i.jsx)(x.Z,{placement:"topRight",title:"Add employees to work on this project",mouseEnterDelay:.05,children:(0,i.jsx)("button",{className:"bg-white bg-opacity-10 hover:bg-opacity-25 transition-all mr-2 p-2 rounded-lg flex flex-row justify-center items-center",onClick:function(){return em(!0)},children:(0,i.jsx)(m.Zev,{size:24})})}),(0,i.jsx)(x.Z,{placement:"topRight",title:"Edit this project",mouseEnterDelay:.05,children:(0,i.jsx)("button",{className:"".concat(e_?"bg-primary":"bg-white bg-opacity-10 hover:bg-opacity-25","  transition-all mr-2 p-2 rounded-lg flex flex-row justify-center items-center"),onClick:function(){return eS(!e_)},children:(0,i.jsx)(m.$iz,{size:24})})}),(0,i.jsx)(x.Z,{placement:"topRight",title:"Remove this project",mouseEnterDelay:.05,children:(0,i.jsx)(p.Z,{title:"Remove project Projectorate?",description:"Are you sure to remove this project from projectorate?",onConfirm:function(){w(en.id)},onCancel:v,okText:"Confirm",cancelText:"No",placement:"bottomLeft",children:(0,i.jsx)("button",{className:"bg-white bg-opacity-10 hover:bg-opacity-25 transition-all mr-2 p-2 rounded-lg flex flex-row justify-center items-center",children:(0,i.jsx)(u.Fuw,{size:24})})})})]})})]})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(h.Z,{defaultActiveKey:"1",type:"card",size:32,onChange:function(e){N(e)},items:ee.map(function(e,t){var s=String(t+1);return{label:"".concat(e),key:s}})})}),1==eg?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($.Z,{isEmployeeProfile:eZ,setIsEmployeeProfile:eE}),(0,i.jsx)(q,{projectId:en.id,isNewEmployee:ej,setisNewEmployee:ex,setIsEmployeeProfile:eE,ownerId:null==ez?void 0:ez.user.id})]}):2==eg?(0,i.jsx)(J,{projectId:en.id,isNewEmployee:ej,setisNewEmployee:ex}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.Z,{isTicketInfo:eb,setIsTicketInfo:eN}),(0,i.jsx)(G.Z,{projectId:en.id,isNewEmployee:ej,setisNewEmployee:ex,setIsTicketInfo:eN})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"Search-projects-section px-4 my-4",children:(0,i.jsx)(a.Z,{type:"projects",title:"SEARCH PROJECTS",description:"Take a dive in to the project and its attributes. Find anything you are looking for in this project",data:E,setFilteredData:A})}),(0,i.jsx)(o.Z,{color:"bg-gray-900",width:"w-full",opacity:"opacity-1"}),(0,i.jsxs)("div",{className:"All-projects-stack mt-4 px-4",children:[(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h1",{className:"font-bold text-xl",children:"ALL PROJECTS"}),(0,i.jsx)("p",{className:"text-sm opacity-60 mt-1",children:"A complete list of all the projects in Projectorate."})]}),(0,i.jsxs)("div",{className:"Projects py-4",children:[ek||0!=D.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,i.jsx)(f.ZP,{status:"404",title:"No projects found!",subTitle:"Could not found any projects, please create new project in you workspace."})}),(0,i.jsx)("div",{class:"inline-grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 grid-flow-row gap-4 w-full",children:et&&ek?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k,{}),(0,i.jsx)(k,{}),(0,i.jsx)(k,{}),(0,i.jsx)(k,{}),(0,i.jsx)(k,{}),(0,i.jsx)(k,{})]}):D.map(function(e){var t;return(0,i.jsx)("div",{className:"project_container cursor-pointer",onClick:function(){return s({name:e.project_name,id:e.id})},children:(0,i.jsx)(c.Z,{ProjectName:e.project_name,employeesCount:e._count.userProjects,teamsCount:e._count.Teams,ticketsCount:e._count.Tickets,tagTitle:null===(t=b(e.projectDomainsId))||void 0===t?void 0:t.title})},e.id)})})]})]}),X?(0,i.jsx)(I,{setIsRefreshProjects:es,setIsCreateProject:K}):(0,i.jsx)(i.Fragment,{})]})]})]})}}},function(e){e.O(0,[874,955,57,90,993,838,48,488,774,888,179],function(){return e(e.s=1044)}),_N_E=e.O()}]);