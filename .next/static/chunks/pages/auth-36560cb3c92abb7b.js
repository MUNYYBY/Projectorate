(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{8020:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return s(7704)}])},7704:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(7568),n=s(6042),i=s(9396),a=s(655),c=s(5893),o=s(7294),l=s(3299),u=s(5675),d=s.n(u),m=s(1163),p=s(9352);function f(e){var t=e.setIsClicked,s=e.setEmail,r=e.setPassword,n=e.loading,i=e.errorMessage,a=(0,o.useState)("h-12 bg-gray-700 rounded-sm px-3 "),l=a[0],u=a[1],d=function(e){e.preventDefault(),t(!0)};return(0,o.useEffect)(function(){i?u(l+"border-red-500 border-2"):u("h-12 bg-gray-700 rounded-sm px-3 ")},[i]),(0,c.jsx)("div",{className:"bg-gray-900 rounded-lg shadow-xl p-9 border-black",style:{height:"34rem",width:"28rem"},children:(0,c.jsxs)("div",{className:"Input-container flex flex-col justify-center items-center",children:[(0,c.jsxs)("div",{className:"flex flex-col justify-center items-center mb-7",children:[(0,c.jsx)("h1",{className:"text-4xl font-demo",children:"Login"}),(0,c.jsx)("p",{className:"pt-2 opacity-60",children:"Please enter your valid Credentials!"})]}),(0,c.jsxs)("form",{children:[(0,c.jsxs)("div",{className:"input-container flex flex-col my-5",children:[(0,c.jsx)("label",{className:"my-1",children:"EMAIL"}),(0,c.jsx)("input",{placeholder:"",className:l,type:"email",onChange:function(e){return s(e.target.value)}})]}),(0,c.jsxs)("div",{className:"input-container flex flex-col my-5",children:[(0,c.jsx)("label",{className:"my-1",children:"PASSWORD"}),(0,c.jsx)("input",{placeholder:"",className:l,type:"password",onChange:function(e){return r(e.target.value)}})]}),i?(0,c.jsxs)("div",{className:"error-message flex flex-row items-center",children:[(0,c.jsx)("div",{className:"error-icon mr-2",children:(0,c.jsx)(p.j6O,{size:28,className:"text-red-500"})}),(0,c.jsx)("p",{className:"text-red-500 text-md",children:i})]}):"",(0,c.jsxs)("div",{className:"submission-section flex flex-col mt-5",children:[(0,c.jsx)("p",{className:"text-xs text-center mb-3 opacity-60",children:"By logging in you are agreeing to the company user terms and conditions"}),(0,c.jsx)("button",{className:n?"bg-secondry px-5 py-3 rounded-sm opacity-60":"bg-secondry px-5 py-3 rounded-sm",type:"submit",onClick:d,disabled:n,children:"LOGIN"})]})]})]})})}var h={src:"/_next/static/media/login_bg_image.adb8dd01.svg",height:400,width:600},g=s(3838),x=s(1613);function y(){var e,t=(0,o.useState)(!1),s=t[0],u=t[1],p=(0,o.useState)(null),y=p[0],b=p[1],j=(0,o.useState)(null),v=j[0],w=j[1],N=(0,o.useState)(!1),O=N[0],_=N[1],P=(0,o.useState)(null),E=P[0],S=P[1],k=(0,o.useState)(null),C=k[0],I=k[1],D=(0,m.useRouter)(),L=(0,x.y)(),R=(L.notifications,L.setNotifications),Z=(0,l.useSession)(),Y=(Z.data,Z.status);(0,o.useEffect)(function(){"authenticated"==Y&&(R({placement:"bottomRight",message:"You are already logged in!",description:"",type:"warning"}),D.replace("/app"))},[Y]);var z,F=(e=(0,r.Z)(function(){var e;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return _(!0),S(null),e={email:y,password:v},[4,(0,l.signIn)("credentials",(0,i.Z)((0,n.Z)({},e),{redirect:!1}))];case 1:return I.apply(void 0,[t.sent()]),[2]}})}),function(){return e.apply(this,arguments)}),M=(z=(0,r.Z)(function(){var e;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,l.getSession)()];case 1:return e=t.sent(),console.log(C),console.log({session:e}),[2]}})}),function(){return z.apply(this,arguments)});return(0,o.useEffect)(function(){console.log(C),C&&(C.error?(_(!1),S("Email or Password Incorrect"==C.error?"Email or Password Incorrect":"Your credentials has been revoked"==C.error?"Your credentials has been revoked":"Some error occoured!"),R({placement:"bottomRight",message:"Login Failed",description:"Please type in correct credentials before you try to login!",type:"error"})):(R({placement:"bottomRight",message:"Login sucess",description:"You have been logged in to the Projectorate!!!",type:"sucess"}),D.replace("/app")),M())},[C]),(0,o.useEffect)(function(){s&&(F(),u(!1))},[s]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"h-screen bg-primary",children:[(0,c.jsx)("div",{className:"secondry-section h-screen w-screen absolute z-0",children:(0,c.jsx)("div",{className:"absolute bottom-0 h-full w-full mx-[-15vw]",children:(0,c.jsx)(d(),{src:h,alt:"Projectorate welcome image",layout:"fill",objectFit:"contain"})})}),(0,c.jsx)("div",{className:"primary-section w-full h-full z-1 absolute flex justify-end items-center lg:pr-40 md:pr-20 sm:10 ",children:(0,c.jsx)(g.E.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.2},children:(0,c.jsx)(f,{setIsClicked:u,setEmail:b,setPassword:w,loading:O,errorMessage:E})})})]})})}},9396:function(e,t,s){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s.push.apply(s,r)}return s})(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}),e}s.d(t,{Z:function(){return r}})}},function(e){e.O(0,[838,675,774,888,179],function(){return e(e.s=8020)}),_N_E=e.O()}]);